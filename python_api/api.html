<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>kaldifst &mdash; kaldifst 1.7.12 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="References" href="../referencens/index.html" />
    <link rel="prev" title="Python API reference" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> kaldifst
          </a>
              <div class="version">
                1.7.12
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick_start/index.html">Quick start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../convert-k2-to-openfst/index.html">Convert FST from k2 to OpenFst</a></li>
<li class="toctree-l1"><a class="reference internal" href="../read-write-ark-scp/index.html">Read and write ark/scp files from Kaldi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lattice/index.html">Lattice</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python API</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Python API reference</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">kaldifst</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#add-self-loops">add_self_loops</a></li>
<li class="toctree-l3"><a class="reference internal" href="#arcsort">arcsort</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compile">compile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compose">compose</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compose-context">compose_context</a></li>
<li class="toctree-l3"><a class="reference internal" href="#connect">connect</a></li>
<li class="toctree-l3"><a class="reference internal" href="#convert-nbest-to-vector">convert_nbest_to_vector</a></li>
<li class="toctree-l3"><a class="reference internal" href="#determinize">determinize</a></li>
<li class="toctree-l3"><a class="reference internal" href="#determinize-star">determinize_star</a></li>
<li class="toctree-l3"><a class="reference internal" href="#divide">divide</a></li>
<li class="toctree-l3"><a class="reference internal" href="#draw">draw</a></li>
<li class="toctree-l3"><a class="reference internal" href="#equal-align">equal_align</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-linear-symbol-sequence">get_linear_symbol_sequence</a></li>
<li class="toctree-l3"><a class="reference internal" href="#info">info</a></li>
<li class="toctree-l3"><a class="reference internal" href="#invert">invert</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lattice-scale">lattice_scale</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lattice-to-nbest">lattice_to_nbest</a></li>
<li class="toctree-l3"><a class="reference internal" href="#make-linear-acceptor">make_linear_acceptor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#minimize">minimize</a></li>
<li class="toctree-l3"><a class="reference internal" href="#minimize-encoded">minimize_encoded</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plus">plus</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reverse">reverse</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rmepsilon">rmepsilon</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scale-lattice">scale_lattice</a></li>
<li class="toctree-l3"><a class="reference internal" href="#shortest-path">shortest_path</a></li>
<li class="toctree-l3"><a class="reference internal" href="#times">times</a></li>
<li class="toctree-l3"><a class="reference internal" href="#arciterator">ArcIterator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#done">done</a></li>
<li class="toctree-l4"><a class="reference internal" href="#flags">flags</a></li>
<li class="toctree-l4"><a class="reference internal" href="#position">position</a></li>
<li class="toctree-l4"><a class="reference internal" href="#value">value</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#floatweight">FloatWeight</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id3">value</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lattice">Lattice</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#copy">copy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#input-symbols">input_symbols</a></li>
<li class="toctree-l4"><a class="reference internal" href="#is-ilabel-sorted">is_ilabel_sorted</a></li>
<li class="toctree-l4"><a class="reference internal" href="#is-olabel-sorted">is_olabel_sorted</a></li>
<li class="toctree-l4"><a class="reference internal" href="#num-states">num_states</a></li>
<li class="toctree-l4"><a class="reference internal" href="#output-symbols">output_symbols</a></li>
<li class="toctree-l4"><a class="reference internal" href="#start">start</a></li>
<li class="toctree-l4"><a class="reference internal" href="#type">type</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#latticearc">LatticeArc</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#init">__init__</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ilabel">ilabel</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nextstate">nextstate</a></li>
<li class="toctree-l4"><a class="reference internal" href="#olabel">olabel</a></li>
<li class="toctree-l4"><a class="reference internal" href="#weight">weight</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#latticeweight">LatticeWeight</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#value1">value1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#value2">value2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#randomaccessvectorfstreader">RandomAccessVectorFstReader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#is-open">is_open</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#sequentialvectorfstreader">SequentialVectorFstReader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id4">done</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">is_open</a></li>
<li class="toctree-l4"><a class="reference internal" href="#key">key</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">value</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stateiterator">StateIterator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id7">done</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">value</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stdarc">StdArc</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id9">__init__</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id10">ilabel</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id11">nextstate</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id12">olabel</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id13">weight</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stdconstfst">StdConstFst</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id14">copy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id15">input_symbols</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id16">is_ilabel_sorted</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id17">is_olabel_sorted</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id18">num_states</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id19">output_symbols</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id20">start</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id21">type</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stdfst">StdFst</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id22">copy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id23">input_symbols</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id24">is_ilabel_sorted</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id25">is_olabel_sorted</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id26">output_symbols</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id27">start</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id28">type</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#stdvectorfst">StdVectorFst</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id29">copy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id30">input_symbols</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id31">is_ilabel_sorted</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id32">is_olabel_sorted</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id33">num_states</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id34">output_symbols</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id35">start</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id36">type</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#symboltable">SymbolTable</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#add-symbol">add_symbol</a></li>
<li class="toctree-l4"><a class="reference internal" href="#find">find</a></li>
<li class="toctree-l4"><a class="reference internal" href="#check-sum">check_sum</a></li>
<li class="toctree-l4"><a class="reference internal" href="#labeled-check-sum">labeled_check_sum</a></li>
<li class="toctree-l4"><a class="reference internal" href="#name">name</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#textnormalizer">TextNormalizer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tropicalweight">TropicalWeight</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id37">value</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#vectorfstwriter">VectorFstWriter</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#write">write</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id38">is_open</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../referencens/index.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">kaldifst</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Python API reference</a> &raquo;</li>
      <li>kaldifst</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/k2-fsa/kaldifst/blob/master/docs/source/python_api/api.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="kaldifst">
<h1>kaldifst<a class="headerlink" href="#kaldifst" title="Permalink to this headline"></a></h1>
<section id="add-self-loops">
<h2>add_self_loops<a class="headerlink" href="#add-self-loops" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.add_self_loops">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">add_self_loops</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fst</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_kaldifst.StdMutableFst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isyms</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">osyms</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kaldifst.add_self_loops" title="Permalink to this definition"></a></dt>
<dd><p>AddSelfLoops is a function you will probably want to use alongside PreDeterminize,
to add self-loops to any FSTs that you compose on the left hand side of the one
modified by PreDeterminize.</p>
<p>This function inserts loops with “special symbols” [e.g. #0, #1] into an FST.
This is done at each final state and each state with non-epsilon output symbols on
at least one arc out of it.  This is to ensure that these symbols, when inserted into
the input side of an FST we will compose with on the right, can “pass through” this
FST.</p>
<p>At input, isyms and osyms must be vectors of the same size n, corresponding
to symbols that currently do not exist in ‘fst’.  For each state in n that has
non-epsilon symbols on the output side of arcs leaving it, or which is a final state,
this function inserts n self-loops with unit weight and one of the n pairs
of symbols on its input and output.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The input FST is modified in-place.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ifst</strong> – The input FST.</p></li>
<li><p><strong>isyms</strong> – A list of input symbols.</p></li>
<li><p><strong>osyms</strong> – A list of output symbols. Must satisfy <code class="docutils literal notranslate"><span class="pre">len(isyms)</span> <span class="pre">==</span> <span class="pre">len(osyms)</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Return <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
<p><strong>Example 1: Add self loops to a transducer</strong></p>
<div class="literal-block-wrapper docutils container" id="id40">
<div class="code-block-caption"><span class="caption-number">Listing 10 </span><span class="caption-text">Add self loops to a transducer.</span><a class="headerlink" href="#id40" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 6</span><span class="s2">0 1 a p</span>
<span class="linenos"> 7</span><span class="s2">1</span>
<span class="linenos"> 8</span><span class="s2">1 2 b q</span>
<span class="linenos"> 9</span><span class="s2">2 3 c r</span>
<span class="linenos">10</span><span class="s2">3 4 f t</span>
<span class="linenos">11</span><span class="s2">3 0 d s</span>
<span class="linenos">12</span><span class="s2">5 0 f t</span>
<span class="linenos">13</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">14</span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="n">sym1</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym1&quot;</span><span class="p">)</span>
<span class="linenos">17</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">18</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos">19</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="linenos">20</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="linenos">21</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;f&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="linenos">22</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;#0&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="linenos">23</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;#1&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="n">sym2</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym2&quot;</span><span class="p">)</span>
<span class="linenos">26</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">27</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;q&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos">28</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="linenos">29</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="linenos">30</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;t&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="linenos">31</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;#0&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="linenos">32</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;#1&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
<span class="linenos">33</span>
<span class="linenos">34</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">s</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">isymbols</span><span class="o">=</span><span class="n">sym1</span><span class="p">,</span> <span class="n">osymbols</span><span class="o">=</span><span class="n">sym2</span><span class="p">)</span>
<span class="linenos">35</span>
<span class="linenos">36</span><span class="n">fst</span><span class="o">.</span><span class="n">input_symbols</span> <span class="o">=</span> <span class="n">sym1</span>
<span class="linenos">37</span><span class="n">fst</span><span class="o">.</span><span class="n">output_symbols</span> <span class="o">=</span> <span class="n">sym2</span>
<span class="linenos">38</span>
<span class="linenos">39</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">40</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">41</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;fst.svg&quot;</span><span class="p">)</span>
<span class="linenos">42</span>
<span class="linenos">43</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">add_self_loops</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">isyms</span><span class="o">=</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="n">osyms</span><span class="o">=</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">])</span>
<span class="linenos">44</span>
<span class="linenos">45</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">46</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">47</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;fst-add-self-loops.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id41" style="width: 600px">
<img alt="fst.svg" src="../_images/fst.svg" /><figcaption>
<p><span class="caption-number">Fig. 10 </span><span class="caption-text">Visualization of fst.svg (before connect)</span><a class="headerlink" href="#id41" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id42" style="width: 600px">
<img alt="fst-add-self-loops.svg" src="../_images/fst-add-self-loops.svg" /><figcaption>
<p><span class="caption-number">Fig. 11 </span><span class="caption-text">Visualization of fst-add-self-loops.svg (after calling add_self_loops())</span><a class="headerlink" href="#id42" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</dd></dl>

</section>
<section id="arcsort">
<h2>arcsort<a class="headerlink" href="#arcsort" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.arcsort">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">arcsort</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_out</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_kaldifst.StdMutableFst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'ilabel'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kaldifst.arcsort" title="Permalink to this definition"></a></dt>
<dd><p>Sort arcs of an FST <strong>in-place</strong>.</p>
<p>See also <a class="reference external" href="https://www.openfst.org/twiki/bin/view/FST/ArcSortDoc">https://www.openfst.org/twiki/bin/view/FST/ArcSortDoc</a></p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The FST is modified in-place.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>in_out</strong> – An acceptor or a transducer. It is modified in-place.</p></li>
<li><p><strong>sort_type</strong> – Comparison method, one of “ilabel”, “olabel”</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Return <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
<p><strong>Example 1: Sort an acceptor</strong></p>
<div class="literal-block-wrapper docutils container" id="id43">
<div class="code-block-caption"><span class="caption-number">Listing 11 </span><span class="caption-text">Sort an acceptor</span><a class="headerlink" href="#id43" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="n">s1</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 4</span><span class="s2">0 1 1</span>
<span class="linenos"> 5</span><span class="s2">0 1 3</span>
<span class="linenos"> 6</span><span class="s2">0 1 2</span>
<span class="linenos"> 7</span><span class="s2">0 2 5</span>
<span class="linenos"> 8</span><span class="s2">0 2 4</span>
<span class="linenos"> 9</span><span class="s2">1 2 2</span>
<span class="linenos">10</span><span class="s2">1 2 3</span>
<span class="linenos">11</span><span class="s2">1 2 1</span>
<span class="linenos">12</span><span class="s2">2</span>
<span class="linenos">13</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">14</span><span class="n">fsa</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">15</span><span class="n">fsa_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fsa</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">16</span><span class="nb">print</span><span class="p">(</span><span class="n">fsa_dot</span><span class="p">)</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos">19</span>
<span class="linenos">20</span><span class="n">source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fsa_dot</span><span class="p">)</span>
<span class="linenos">21</span><span class="n">source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;acceptor.svg&quot;</span><span class="p">)</span>
<span class="linenos">22</span>
<span class="linenos">23</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">arcsort</span><span class="p">(</span><span class="n">fsa</span><span class="p">)</span>
<span class="linenos">24</span><span class="n">fsa_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fsa</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">25</span>
<span class="linenos">26</span><span class="n">source2</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fsa_dot</span><span class="p">)</span>
<span class="linenos">27</span><span class="n">source2</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;sorted.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id44" style="width: 600px">
<img alt="acceptor.svg" src="../_images/acceptor.svg" /><figcaption>
<p><span class="caption-number">Fig. 12 </span><span class="caption-text">Visualization of acceptor.svg (before sort)</span><a class="headerlink" href="#id44" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id45" style="width: 600px">
<img alt="sorted.svg" src="../_images/sorted.svg" /><figcaption>
<p><span class="caption-number">Fig. 13 </span><span class="caption-text">Visualization of sorted.svg (after sort)</span><a class="headerlink" href="#id45" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p><strong>Example 2: Sort a transducer by ilabel</strong></p>
<div class="literal-block-wrapper docutils container" id="id46">
<div class="code-block-caption"><span class="caption-number">Listing 12 </span><span class="caption-text">Sort a transducer by ilabel</span><a class="headerlink" href="#id46" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="n">s1</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 4</span><span class="s2">0 1 1 4</span>
<span class="linenos"> 5</span><span class="s2">0 1 3 5</span>
<span class="linenos"> 6</span><span class="s2">0 1 2 3</span>
<span class="linenos"> 7</span><span class="s2">0 2 5 2</span>
<span class="linenos"> 8</span><span class="s2">0 2 4 1</span>
<span class="linenos"> 9</span><span class="s2">1 2 2 3</span>
<span class="linenos">10</span><span class="s2">1 2 3 1</span>
<span class="linenos">11</span><span class="s2">1 2 1 2</span>
<span class="linenos">12</span><span class="s2">2</span>
<span class="linenos">13</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">14</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="linenos">15</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">16</span><span class="nb">print</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos">19</span>
<span class="linenos">20</span><span class="n">source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">21</span><span class="n">source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;transducer1.svg&quot;</span><span class="p">)</span>
<span class="linenos">22</span>
<span class="linenos">23</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">arcsort</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">sort_type</span><span class="o">=</span><span class="s2">&quot;ilabel&quot;</span><span class="p">)</span>
<span class="linenos">24</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">25</span><span class="n">source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">26</span><span class="n">source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;sorted-transducer-ilabel.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id47" style="width: 600px">
<img alt="transducer1.svg" src="../_images/transducer1.svg" /><figcaption>
<p><span class="caption-number">Fig. 14 </span><span class="caption-text">Visualization of transducer1.svg (before sort)</span><a class="headerlink" href="#id47" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id48" style="width: 600px">
<img alt="sorted-transducer-ilabel.svg" src="../_images/sorted-transducer-ilabel.svg" /><figcaption>
<p><span class="caption-number">Fig. 15 </span><span class="caption-text">Visualization of sorted-transducer-ilabel.svg (after sort)</span><a class="headerlink" href="#id48" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p><strong>Example 3: Sort a transducer by olabel</strong></p>
<div class="literal-block-wrapper docutils container" id="id49">
<div class="code-block-caption"><span class="caption-number">Listing 13 </span><span class="caption-text">Sort a transducer by olabel</span><a class="headerlink" href="#id49" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="n">s1</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 4</span><span class="s2">0 1 1 4</span>
<span class="linenos"> 5</span><span class="s2">0 1 3 5</span>
<span class="linenos"> 6</span><span class="s2">0 1 2 3</span>
<span class="linenos"> 7</span><span class="s2">0 2 5 2</span>
<span class="linenos"> 8</span><span class="s2">0 2 4 1</span>
<span class="linenos"> 9</span><span class="s2">1 2 2 3</span>
<span class="linenos">10</span><span class="s2">1 2 3 1</span>
<span class="linenos">11</span><span class="s2">1 2 1 2</span>
<span class="linenos">12</span><span class="s2">2</span>
<span class="linenos">13</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">14</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="linenos">15</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">16</span><span class="nb">print</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos">19</span>
<span class="linenos">20</span><span class="n">source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">21</span><span class="n">source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;transducer2.svg&quot;</span><span class="p">)</span>
<span class="linenos">22</span>
<span class="linenos">23</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">arcsort</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">sort_type</span><span class="o">=</span><span class="s2">&quot;olabel&quot;</span><span class="p">)</span>
<span class="linenos">24</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">25</span><span class="n">source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">26</span><span class="n">source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;sorted-transducer-olabel.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id50" style="width: 600px">
<img alt="transducer2.svg" src="../_images/transducer2.svg" /><figcaption>
<p><span class="caption-number">Fig. 16 </span><span class="caption-text">Visualization of transducer2.svg (before sort)</span><a class="headerlink" href="#id50" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id51" style="width: 600px">
<img alt="sorted-transducer-olabel.svg" src="../_images/sorted-transducer-olabel.svg" /><figcaption>
<p><span class="caption-number">Fig. 17 </span><span class="caption-text">Visualization of sorted-transducer-olabel.svg (after sort)</span><a class="headerlink" href="#id51" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</dd></dl>

</section>
<section id="compile">
<h2>compile<a class="headerlink" href="#compile" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.compile">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">compile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acceptor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arc_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'standard'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fst_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'vector'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isymbols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">osymbols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssymbols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_isymbols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_osymbols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_state_numbering</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_negative_labels</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">object</span></span></span><a class="headerlink" href="#kaldifst.compile" title="Permalink to this definition"></a></dt>
<dd><p>Create transducer/acceptor from simple text format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>s</strong> – A string containing the text format of the FST.</p></li>
<li><p><strong>acceptor</strong> – Input in acceptor format.</p></li>
<li><p><strong>arc_type</strong> – Output arc type.</p></li>
<li><p><strong>fst_type</strong> – Output FST type.</p></li>
<li><p><strong>isymbols</strong> – Input label symbol table.</p></li>
<li><p><strong>osymbols</strong> – Output label symbol table.</p></li>
<li><p><strong>ssymbols</strong> – State label symbol table.</p></li>
<li><p><strong>keep_isymbols</strong> – Store input label symbol table with FST.</p></li>
<li><p><strong>keep_osymbols</strong> – Store output label symbol table with FST.</p></li>
<li><p><strong>keep_state_numbering</strong> – Do not renumber input states.</p></li>
<li><p><strong>allow_negative_labels</strong> – Allow negative labels (not recommended; may cause conflicts)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Return an FST.</p>
</dd>
</dl>
<p><strong>Example 1: Create an acceptor</strong></p>
<div class="literal-block-wrapper docutils container" id="id52">
<div class="code-block-caption"><span class="caption-number">Listing 14 </span><span class="caption-text">Create an acceptor</span><a class="headerlink" href="#id52" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="n">s1</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 4</span><span class="s2">0 1 1 1.5</span>
<span class="linenos"> 5</span><span class="s2">1 2 2 2.5</span>
<span class="linenos"> 6</span><span class="s2">2 0.3</span>
<span class="linenos"> 7</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 8</span><span class="n">fsa</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos"> 9</span><span class="n">fsa_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fsa</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">10</span><span class="nb">print</span><span class="p">(</span><span class="n">fsa_dot</span><span class="p">)</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="n">source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fsa_dot</span><span class="p">)</span>
<span class="linenos">15</span><span class="n">source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;acceptor1.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id53" style="width: 600px">
<img alt="acceptor1.svg" src="../_images/acceptor1.svg" /><figcaption>
<p><span class="caption-number">Fig. 18 </span><span class="caption-text">Visualization of acceptor1.svg</span><a class="headerlink" href="#id53" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p><strong>Example 2: Create an acceptor with symbol table</strong></p>
<div class="literal-block-wrapper docutils container" id="id54">
<div class="code-block-caption"><span class="caption-number">Listing 15 </span><span class="caption-text">Create an acceptor with symbol table</span><a class="headerlink" href="#id54" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="n">s1</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 4</span><span class="s2">0 1 a 1.5</span>
<span class="linenos"> 5</span><span class="s2">1 2 b 2.5</span>
<span class="linenos"> 6</span><span class="s2">2 0.3</span>
<span class="linenos"> 7</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 8</span><span class="n">isym</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;An arbitrary name&quot;</span><span class="p">)</span>
<span class="linenos"> 9</span><span class="n">isym</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">10</span><span class="n">isym</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos">11</span><span class="n">fsa</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">isymbols</span><span class="o">=</span><span class="n">isym</span><span class="p">,</span> <span class="n">keep_isymbols</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="linenos">12</span><span class="n">fsa</span><span class="o">.</span><span class="n">input_symbols</span> <span class="o">=</span> <span class="n">isym</span>
<span class="linenos">13</span><span class="n">fsa_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fsa</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">14</span><span class="nb">print</span><span class="p">(</span><span class="n">fsa_dot</span><span class="p">)</span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="n">source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fsa_dot</span><span class="p">)</span>
<span class="linenos">19</span><span class="n">source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;acceptor2.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id55" style="width: 600px">
<img alt="acceptor2.svg" src="../_images/acceptor2.svg" /><figcaption>
<p><span class="caption-number">Fig. 19 </span><span class="caption-text">Visualization of acceptor2.svg</span><a class="headerlink" href="#id55" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p><strong>Example 3: Create a transducer</strong></p>
<div class="literal-block-wrapper docutils container" id="id56">
<div class="code-block-caption"><span class="caption-number">Listing 16 </span><span class="caption-text">Create a transducer</span><a class="headerlink" href="#id56" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="n">s1</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 4</span><span class="s2">0 1 1 10 1.5</span>
<span class="linenos"> 5</span><span class="s2">1 2 2 20 2.5</span>
<span class="linenos"> 6</span><span class="s2">2 0.3</span>
<span class="linenos"> 7</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 8</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="linenos"> 9</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">10</span><span class="nb">print</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="n">source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">15</span><span class="n">source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;transducer1.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id57" style="width: 600px">
<img alt="transducer1.svg" src="../_images/transducer11.svg" /><figcaption>
<p><span class="caption-number">Fig. 20 </span><span class="caption-text">Visualization of transducer1.svg</span><a class="headerlink" href="#id57" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p><strong>Example 4: Create a transducer with symbol table</strong></p>
<div class="literal-block-wrapper docutils container" id="id58">
<div class="code-block-caption"><span class="caption-number">Listing 17 </span><span class="caption-text">Create a transducer with symbol table</span><a class="headerlink" href="#id58" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="n">s1</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 4</span><span class="s2">0 1 a A 1.5</span>
<span class="linenos"> 5</span><span class="s2">1 2 b B 2.5</span>
<span class="linenos"> 6</span><span class="s2">2 0.3</span>
<span class="linenos"> 7</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 8</span><span class="n">isym</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;An arbitrary name&quot;</span><span class="p">)</span>
<span class="linenos"> 9</span><span class="n">isym</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">10</span><span class="n">isym</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="n">osym</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Another arbitrary name&quot;</span><span class="p">)</span>
<span class="linenos">13</span><span class="n">osym</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">14</span><span class="n">osym</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
<span class="linenos">17</span>    <span class="n">s</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span>
<span class="linenos">18</span>    <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">19</span>    <span class="n">isymbols</span><span class="o">=</span><span class="n">isym</span><span class="p">,</span>
<span class="linenos">20</span>    <span class="n">osymbols</span><span class="o">=</span><span class="n">osym</span><span class="p">,</span>
<span class="linenos">21</span>    <span class="n">keep_isymbols</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">22</span>    <span class="n">keep_osymbols</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">23</span><span class="p">)</span>
<span class="linenos">24</span><span class="n">fst</span><span class="o">.</span><span class="n">input_symbols</span> <span class="o">=</span> <span class="n">isym</span>
<span class="linenos">25</span><span class="n">fst</span><span class="o">.</span><span class="n">output_symbols</span> <span class="o">=</span> <span class="n">osym</span>
<span class="linenos">26</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">27</span><span class="nb">print</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">28</span>
<span class="linenos">29</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos">30</span>
<span class="linenos">31</span><span class="n">source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">32</span><span class="n">source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;transducer2.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id59" style="width: 600px">
<img alt="transducer2.svg" src="../_images/transducer21.svg" /><figcaption>
<p><span class="caption-number">Fig. 21 </span><span class="caption-text">Visualization of transducer2.svg</span><a class="headerlink" href="#id59" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</dd></dl>

</section>
<section id="compose">
<h2>compose<a class="headerlink" href="#compose" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.compose">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">compose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fst1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_kaldifst.StdFst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fst2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_kaldifst.StdFst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">match_side</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'left'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compose_filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'sequence'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_kaldifst.StdMutableFst</span></span></span><a class="headerlink" href="#kaldifst.compose" title="Permalink to this definition"></a></dt>
<dd><p>Compose two FSTs.</p>
<p>This operation computes the composition of two transducers. If A transduces
string x to y with weight a and B transduces y to z with weight b, then their
composition transduces string x to z with weight a ⊗ b.</p>
<p>See also <a class="reference external" href="https://www.openfst.org/twiki/bin/view/FST/ComposeDoc">https://www.openfst.org/twiki/bin/view/FST/ComposeDoc</a></p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The output labels of the first transducer or the input labels of the
second transducer must be <code class="docutils literal notranslate"><span class="pre">sorted</span></code>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fst1</strong> – The first FST.</p></li>
<li><p><strong>fst2</strong> – The second FST.</p></li>
<li><p><strong>match_side</strong> – Defaults to left.</p></li>
<li><p><strong>compose_filter</strong> – Composition filter, one of: “alt_sequence”, “auto”, “match”,
“no_match”, “null”, “sequence”, “trivial”.</p></li>
<li><p><strong>connect</strong> – Trim output.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Return the composition result.</p>
</dd>
</dl>
<p><strong>Example 1: Compose two transducers.</strong></p>
<div class="literal-block-wrapper docutils container" id="id60">
<div class="code-block-caption"><span class="caption-number">Listing 18 </span><span class="caption-text">Compose two transducers</span><a class="headerlink" href="#id60" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="n">s1</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 6</span><span class="s2">0 1 a q 1</span>
<span class="linenos"> 7</span><span class="s2">0 2 a r 2.5</span>
<span class="linenos"> 8</span><span class="s2">1 1 c s 1</span>
<span class="linenos"> 9</span><span class="s2">1 0</span>
<span class="linenos">10</span><span class="s2">2 2.5</span>
<span class="linenos">11</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="n">sym1</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym1&quot;</span><span class="p">)</span>
<span class="linenos">14</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">15</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="n">sym2</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym2&quot;</span><span class="p">)</span>
<span class="linenos">18</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;q&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">19</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos">20</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="n">a</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">isymbols</span><span class="o">=</span><span class="n">sym1</span><span class="p">,</span> <span class="n">osymbols</span><span class="o">=</span><span class="n">sym2</span><span class="p">)</span>
<span class="linenos">23</span><span class="n">a</span><span class="o">.</span><span class="n">input_symbols</span> <span class="o">=</span> <span class="n">sym1</span>
<span class="linenos">24</span><span class="n">a</span><span class="o">.</span><span class="n">output_symbols</span> <span class="o">=</span> <span class="n">sym2</span>
<span class="linenos">25</span>
<span class="linenos">26</span><span class="n">s2</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">27</span><span class="s2">0 1 q f 1</span>
<span class="linenos">28</span><span class="s2">0 2 r h 3</span>
<span class="linenos">29</span><span class="s2">1 2 s g 2.5</span>
<span class="linenos">30</span><span class="s2">2 2 s j 1.5</span>
<span class="linenos">31</span><span class="s2">2 2</span>
<span class="linenos">32</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">33</span>
<span class="linenos">34</span><span class="n">sym3</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym3&quot;</span><span class="p">)</span>
<span class="linenos">35</span><span class="n">sym3</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;f&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">36</span><span class="n">sym3</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;g&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos">37</span><span class="n">sym3</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;h&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="linenos">38</span><span class="n">sym3</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;j&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="linenos">39</span>
<span class="linenos">40</span><span class="n">b</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">s2</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">isymbols</span><span class="o">=</span><span class="n">sym2</span><span class="p">,</span> <span class="n">osymbols</span><span class="o">=</span><span class="n">sym3</span><span class="p">)</span>
<span class="linenos">41</span><span class="n">b</span><span class="o">.</span><span class="n">input_symbols</span> <span class="o">=</span> <span class="n">sym2</span>
<span class="linenos">42</span><span class="n">b</span><span class="o">.</span><span class="n">output_symbols</span> <span class="o">=</span> <span class="n">sym3</span>
<span class="linenos">43</span>
<span class="linenos">44</span><span class="n">a_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">45</span><span class="n">a_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">a_dot</span><span class="p">)</span>
<span class="linenos">46</span><span class="n">a_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;a.svg&quot;</span><span class="p">)</span>
<span class="linenos">47</span>
<span class="linenos">48</span><span class="n">b_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">49</span><span class="n">b_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">b_dot</span><span class="p">)</span>
<span class="linenos">50</span><span class="n">b_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;b.svg&quot;</span><span class="p">)</span>
<span class="linenos">51</span>
<span class="linenos">52</span><span class="c1"># sort b by ilabel. It is sorted in-place</span>
<span class="linenos">53</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">arcsort</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">sort_type</span><span class="o">=</span><span class="s2">&quot;ilabel&quot;</span><span class="p">)</span>
<span class="linenos">54</span>
<span class="linenos">55</span><span class="n">c</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compose</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="linenos">56</span><span class="n">c_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">57</span><span class="n">c_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">c_dot</span><span class="p">)</span>
<span class="linenos">58</span><span class="n">c_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;c.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id61" style="width: 600px">
<img alt="a.svg" src="../_images/a.svg" /><figcaption>
<p><span class="caption-number">Fig. 22 </span><span class="caption-text">The first transducer a.</span><a class="headerlink" href="#id61" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id62" style="width: 600px">
<img alt="b.svg" src="../_images/b.svg" /><figcaption>
<p><span class="caption-number">Fig. 23 </span><span class="caption-text">The second transducer b</span><a class="headerlink" href="#id62" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id63" style="width: 600px">
<img alt="c.svg" src="../_images/c.svg" /><figcaption>
<p><span class="caption-number">Fig. 24 </span><span class="caption-text">The composition result c.</span><a class="headerlink" href="#id63" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</dd></dl>

</section>
<section id="compose-context">
<h2>compose_context<a class="headerlink" href="#compose-context" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.compose_context">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">compose_context</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">disambig_syms</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context_width</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">central_position</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ifst</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_kaldifst.StdVectorFst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">project_ifst</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">_kaldifst.StdVectorFst</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#kaldifst.compose_context" title="Permalink to this definition"></a></dt>
<dd><p>compose_context composes efficiently with a context fst
that it generates.</p>
<p>Without <code class="docutils literal notranslate"><span class="pre">disambig_syms</span></code> specified, it
assumes that all input symbols of <code class="docutils literal notranslate"><span class="pre">ifst</span></code> are phones.
It adds the subsequential symbol itself (it does not
appear in the output so doesn’t need to be specified by the user).
the <code class="docutils literal notranslate"><span class="pre">disambig_syms</span></code> is a list of disambiguation symbols on the LHS
of <code class="docutils literal notranslate"><span class="pre">ifst</span></code>.  The symbols on the LHS of <code class="docutils literal notranslate"><span class="pre">out.fst</span></code> are indexes into
the <code class="docutils literal notranslate"><span class="pre">ilabels.list</span></code> file, which is a kaldi-format file containing a
<code class="docutils literal notranslate"><span class="pre">vector&lt;vector&lt;int32&gt;&gt;</span></code>, which specifies what the labels mean in
terms of windows of symbols.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>disambig_syms</strong> – List of disambiguation symbols, e.g. the integer ids of #0, #1, #2 … in
the phones.txt.</p></li>
<li><p><strong>context_width</strong> – Size of context window, e.g. 3 for triphone.</p></li>
<li><p><strong>central_position</strong> – Central position in phonetic context window (zero-based index), e.g. 1 for
triphone.</p></li>
<li><p><strong>ifst</strong> – The FST we are composing with C (e.g. LG.fst),</p></li>
<li><p><strong>project_ifst</strong> – This is intended only to be set to true in the program
‘fstmakecontextfst’… if true, it will project on the input after adding
the subsequential loop to ‘ifst’, which allows us to reconstruct the
context fst C.fst.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>ofst: The resulting fst</p></li>
<li><p>ilabels, a List[List[int]]</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Return a tuple containing (ofst, ilabels), where</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="connect">
<h2>connect<a class="headerlink" href="#connect" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.connect">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_out</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_kaldifst.StdMutableFst</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kaldifst.connect" title="Permalink to this definition"></a></dt>
<dd><p>This operation trims an FST, removing states and arcs that are not on
successful paths.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The input FST is modified in-place.</p>
</div>
<p>See also <a class="reference external" href="https://www.openfst.org/twiki/bin/view/FST/ConnectDoc">https://www.openfst.org/twiki/bin/view/FST/ConnectDoc</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>in_out</strong> – The FST to be connected. Note it is modified in-place.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Return <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
<p><strong>Example 1: Connect a transducer</strong></p>
<div class="literal-block-wrapper docutils container" id="id64">
<div class="code-block-caption"><span class="caption-number">Listing 19 </span><span class="caption-text">Connect a transducer</span><a class="headerlink" href="#id64" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 6</span><span class="s2">0 1 a p</span>
<span class="linenos"> 7</span><span class="s2">1</span>
<span class="linenos"> 8</span><span class="s2">1 2 b q</span>
<span class="linenos"> 9</span><span class="s2">2 3 c r</span>
<span class="linenos">10</span><span class="s2">3 4 f t</span>
<span class="linenos">11</span><span class="s2">3 0 d s</span>
<span class="linenos">12</span><span class="s2">5 0 f t</span>
<span class="linenos">13</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">14</span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="n">sym1</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym1&quot;</span><span class="p">)</span>
<span class="linenos">17</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">18</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos">19</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="linenos">20</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="linenos">21</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;f&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="linenos">22</span>
<span class="linenos">23</span><span class="n">sym2</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym2&quot;</span><span class="p">)</span>
<span class="linenos">24</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">25</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;q&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos">26</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="linenos">27</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="linenos">28</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;t&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="linenos">29</span>
<span class="linenos">30</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">s</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">isymbols</span><span class="o">=</span><span class="n">sym1</span><span class="p">,</span> <span class="n">osymbols</span><span class="o">=</span><span class="n">sym2</span><span class="p">)</span>
<span class="linenos">31</span>
<span class="linenos">32</span><span class="n">fst</span><span class="o">.</span><span class="n">input_symbols</span> <span class="o">=</span> <span class="n">sym1</span>
<span class="linenos">33</span><span class="n">fst</span><span class="o">.</span><span class="n">output_symbols</span> <span class="o">=</span> <span class="n">sym2</span>
<span class="linenos">34</span>
<span class="linenos">35</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">36</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">37</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;fst.svg&quot;</span><span class="p">)</span>
<span class="linenos">38</span>
<span class="linenos">39</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">fst</span><span class="p">)</span>
<span class="linenos">40</span>
<span class="linenos">41</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">42</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">43</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;fst-connect.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id65" style="width: 600px">
<img alt="fst.svg" src="../_images/fst1.svg" /><figcaption>
<p><span class="caption-number">Fig. 25 </span><span class="caption-text">Visualization of fst.svg (before connect)</span><a class="headerlink" href="#id65" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id66" style="width: 600px">
<img alt="fst-connect.svg" src="../_images/fst-connect.svg" /><figcaption>
<p><span class="caption-number">Fig. 26 </span><span class="caption-text">Visualization of fst-connect.svg (after connect)</span><a class="headerlink" href="#id66" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</dd></dl>

</section>
<section id="convert-nbest-to-vector">
<h2>convert_nbest_to_vector<a class="headerlink" href="#convert-nbest-to-vector" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.convert_nbest_to_vector">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">convert_nbest_to_vector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kaldifst.convert_nbest_to_vector" title="Permalink to this definition"></a></dt>
<dd><p>Overloaded function.</p>
<ol class="arabic simple">
<li><p>convert_nbest_to_vector(fst: _kaldifst.StdFst) -&gt; List[_kaldifst.StdVectorFst]</p></li>
</ol>
<p>This function converts an FST with a special structure, which is
output by the OpenFst functions ShortestPath and RandGen, and converts
them into a list of separate FSTs.  This special structure is that
the only state that has more than one (arcs-out or final-prob) is the
start state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fst</strong> – The input fst, which should be returned by <code class="docutils literal notranslate"><span class="pre">shortestpath</span></code>.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Return a list of linear FSTs.</p>
</dd>
</dl>
<p><strong>Example for a StdVectorFst</strong></p>
<div class="literal-block-wrapper docutils container" id="id67">
<div class="code-block-caption"><span class="caption-number">Listing 20 </span><span class="caption-text">convert_nbest_to_vector for a StdVectorFst</span><a class="headerlink" href="#id67" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python3</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="n">s1</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 8</span><span class="s2">0 1 a 0.1</span>
<span class="linenos"> 9</span><span class="s2">0 2 b 0.1</span>
<span class="linenos">10</span><span class="s2">1 3 c 0.4</span>
<span class="linenos">11</span><span class="s2">1 3 d 0.2</span>
<span class="linenos">12</span><span class="s2">2 3 c 0.3</span>
<span class="linenos">13</span><span class="s2">2 3 d 0.2</span>
<span class="linenos">14</span><span class="s2">3 0</span>
<span class="linenos">15</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="n">sym1</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym1&quot;</span><span class="p">)</span>
<span class="linenos">18</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;eps&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">19</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">20</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos">21</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="linenos">22</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="linenos">23</span>
<span class="linenos">24</span><span class="n">a</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">isymbols</span><span class="o">=</span><span class="n">sym1</span><span class="p">)</span>
<span class="linenos">25</span><span class="n">a</span><span class="o">.</span><span class="n">input_symbols</span> <span class="o">=</span> <span class="n">sym1</span>
<span class="linenos">26</span>
<span class="linenos">27</span><span class="n">a_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">28</span><span class="n">a_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">a_dot</span><span class="p">)</span>
<span class="linenos">29</span><span class="n">a_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;vector-fst.svg&quot;</span><span class="p">)</span>
<span class="linenos">30</span>
<span class="linenos">31</span><span class="n">nbest_3</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="linenos">32</span><span class="n">nbest_3_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">nbest_3</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">33</span><span class="n">nbest_3_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">nbest_3_dot</span><span class="p">)</span>
<span class="linenos">34</span><span class="n">nbest_3_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;vector-fst-3best.svg&quot;</span><span class="p">)</span>
<span class="linenos">35</span>
<span class="linenos">36</span><span class="n">nbest_list</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">convert_nbest_to_vector</span><span class="p">(</span><span class="n">nbest_3</span><span class="p">)</span>
<span class="linenos">37</span><span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">nbest_list</span><span class="p">:</span>
<span class="linenos">38</span>    <span class="n">b</span><span class="o">.</span><span class="n">input_symbols</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">input_symbols</span>
<span class="linenos">39</span>    <span class="n">b</span><span class="o">.</span><span class="n">output_symbols</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">output_symbols</span>
<span class="linenos">40</span>
<span class="linenos">41</span><span class="n">nbest_list_0_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">nbest_list</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">42</span><span class="n">nbest_list_0_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">nbest_list_0_dot</span><span class="p">)</span>
<span class="linenos">43</span><span class="n">nbest_list_0_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;vector-fst-3best-0.svg&quot;</span><span class="p">)</span>
<span class="linenos">44</span>
<span class="linenos">45</span><span class="n">nbest_list_1_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">nbest_list</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">46</span><span class="n">nbest_list_1_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">nbest_list_1_dot</span><span class="p">)</span>
<span class="linenos">47</span><span class="n">nbest_list_1_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;vector-fst-3best-1.svg&quot;</span><span class="p">)</span>
<span class="linenos">48</span>
<span class="linenos">49</span><span class="n">nbest_list_2_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">nbest_list</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">50</span><span class="n">nbest_list_2_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">nbest_list_2_dot</span><span class="p">)</span>
<span class="linenos">51</span><span class="n">nbest_list_2_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;vector-fst-3best-2.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id68" style="width: 600px">
<img alt="vector-fst.svg" src="../_images/vector-fst.svg" /><figcaption>
<p><span class="caption-number">Fig. 27 </span><span class="caption-text">Visualization of vector-fst.svg</span><a class="headerlink" href="#id68" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id69" style="width: 600px">
<img alt="vector-fst-3best.svg" src="../_images/vector-fst-3best.svg" /><figcaption>
<p><span class="caption-number">Fig. 28 </span><span class="caption-text">Visualization of vector-fst-3best.svg</span><a class="headerlink" href="#id69" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id70" style="width: 600px">
<img alt="vector-fst-3best-0.svg" src="../_images/vector-fst-3best-0.svg" /><figcaption>
<p><span class="caption-number">Fig. 29 </span><span class="caption-text">Visualization of vector-fst-3best-0.svg</span><a class="headerlink" href="#id70" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id71" style="width: 600px">
<img alt="vector-fst-3best-1.svg" src="../_images/vector-fst-3best-1.svg" /><figcaption>
<p><span class="caption-number">Fig. 30 </span><span class="caption-text">Visualization of vector-fst-3best-1.svg</span><a class="headerlink" href="#id71" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id72" style="width: 600px">
<img alt="vector-fst-3best-2.svg" src="../_images/vector-fst-3best-2.svg" /><figcaption>
<p><span class="caption-number">Fig. 31 </span><span class="caption-text">Visualization of vector-fst-3best-2.svg</span><a class="headerlink" href="#id72" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<ol class="arabic simple" start="2">
<li><p>convert_nbest_to_vector(fst: _kaldifst.LatticeFst) -&gt; List[_kaldifst.Lattice]</p></li>
</ol>
<p>This function converts an FST with a special structure, which is
output by the OpenFst functions ShortestPath and RandGen, and converts
them into a list of separate FSTs.  This special structure is that
the only state that has more than one (arcs-out or final-prob) is the
start state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fst</strong> – The input fst, which should be returned by <code class="docutils literal notranslate"><span class="pre">shortestpath</span></code>.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Return a list of linear FSTs.</p>
</dd>
</dl>
<p><strong>Example for a Lattice</strong></p>
<div class="literal-block-wrapper docutils container" id="id73">
<div class="code-block-caption"><span class="caption-number">Listing 21 </span><span class="caption-text">convert_nbest_to_vector for a Lattice</span><a class="headerlink" href="#id73" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="ch">#!/usr/bin/env python3</span>
<span class="linenos">  2</span>
<span class="linenos">  3</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos">  4</span>
<span class="linenos">  5</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos">  6</span>
<span class="linenos">  7</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">Lattice</span><span class="p">()</span>
<span class="linenos">  8</span><span class="n">s0</span> <span class="o">=</span> <span class="n">fst</span><span class="o">.</span><span class="n">add_state</span><span class="p">()</span>
<span class="linenos">  9</span><span class="n">s1</span> <span class="o">=</span> <span class="n">fst</span><span class="o">.</span><span class="n">add_state</span><span class="p">()</span>
<span class="linenos"> 10</span><span class="n">s2</span> <span class="o">=</span> <span class="n">fst</span><span class="o">.</span><span class="n">add_state</span><span class="p">()</span>
<span class="linenos"> 11</span><span class="n">s3</span> <span class="o">=</span> <span class="n">fst</span><span class="o">.</span><span class="n">add_state</span><span class="p">()</span>
<span class="linenos"> 12</span>
<span class="linenos"> 13</span><span class="n">fst</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">s0</span>
<span class="linenos"> 14</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos"> 15</span>    <span class="n">state</span><span class="o">=</span><span class="n">s0</span><span class="p">,</span>
<span class="linenos"> 16</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos"> 17</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="linenos"> 18</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="linenos"> 19</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.08</span><span class="p">),</span>
<span class="linenos"> 20</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span>
<span class="linenos"> 21</span>    <span class="p">),</span>
<span class="linenos"> 22</span><span class="p">)</span>
<span class="linenos"> 23</span>
<span class="linenos"> 24</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos"> 25</span>    <span class="n">state</span><span class="o">=</span><span class="n">s0</span><span class="p">,</span>
<span class="linenos"> 26</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos"> 27</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="linenos"> 28</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="linenos"> 29</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.03</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.07</span><span class="p">),</span>
<span class="linenos"> 30</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s2</span><span class="p">,</span>
<span class="linenos"> 31</span>    <span class="p">),</span>
<span class="linenos"> 32</span><span class="p">)</span>
<span class="linenos"> 33</span>
<span class="linenos"> 34</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos"> 35</span>    <span class="n">state</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span>
<span class="linenos"> 36</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos"> 37</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos"> 38</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos"> 39</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.3</span><span class="p">),</span>
<span class="linenos"> 40</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s3</span><span class="p">,</span>
<span class="linenos"> 41</span>    <span class="p">),</span>
<span class="linenos"> 42</span><span class="p">)</span>
<span class="linenos"> 43</span>
<span class="linenos"> 44</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos"> 45</span>    <span class="n">state</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span>
<span class="linenos"> 46</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos"> 47</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="linenos"> 48</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="linenos"> 49</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.05</span><span class="p">),</span>
<span class="linenos"> 50</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s3</span><span class="p">,</span>
<span class="linenos"> 51</span>    <span class="p">),</span>
<span class="linenos"> 52</span><span class="p">)</span>
<span class="linenos"> 53</span>
<span class="linenos"> 54</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos"> 55</span>    <span class="n">state</span><span class="o">=</span><span class="n">s2</span><span class="p">,</span>
<span class="linenos"> 56</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos"> 57</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos"> 58</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos"> 59</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.15</span><span class="p">),</span>
<span class="linenos"> 60</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s3</span><span class="p">,</span>
<span class="linenos"> 61</span>    <span class="p">),</span>
<span class="linenos"> 62</span><span class="p">)</span>
<span class="linenos"> 63</span>
<span class="linenos"> 64</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos"> 65</span>    <span class="n">state</span><span class="o">=</span><span class="n">s2</span><span class="p">,</span>
<span class="linenos"> 66</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos"> 67</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="linenos"> 68</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="linenos"> 69</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.15</span><span class="p">),</span>
<span class="linenos"> 70</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s3</span><span class="p">,</span>
<span class="linenos"> 71</span>    <span class="p">),</span>
<span class="linenos"> 72</span><span class="p">)</span>
<span class="linenos"> 73</span>
<span class="linenos"> 74</span><span class="n">fst</span><span class="o">.</span><span class="n">set_final</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="n">s3</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="o">.</span><span class="n">one</span><span class="p">)</span>
<span class="linenos"> 75</span>
<span class="linenos"> 76</span>
<span class="linenos"> 77</span><span class="n">sym1</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym1&quot;</span><span class="p">)</span>
<span class="linenos"> 78</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;eps&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos"> 79</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos"> 80</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos"> 81</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="linenos"> 82</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="linenos"> 83</span>
<span class="linenos"> 84</span><span class="n">sym2</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym2&quot;</span><span class="p">)</span>
<span class="linenos"> 85</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;eps&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos"> 86</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos"> 87</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos"> 88</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="linenos"> 89</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="linenos"> 90</span>
<span class="linenos"> 91</span><span class="n">fst</span><span class="o">.</span><span class="n">input_symbols</span> <span class="o">=</span> <span class="n">sym1</span>
<span class="linenos"> 92</span><span class="n">fst</span><span class="o">.</span><span class="n">output_symbols</span> <span class="o">=</span> <span class="n">sym2</span>
<span class="linenos"> 93</span>
<span class="linenos"> 94</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos"> 95</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos"> 96</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;lattice.svg&quot;</span><span class="p">)</span>
<span class="linenos"> 97</span>
<span class="linenos"> 98</span><span class="n">nbest_3</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="linenos"> 99</span><span class="n">nbest_3_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">nbest_3</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">100</span><span class="n">nbest_3_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">nbest_3_dot</span><span class="p">)</span>
<span class="linenos">101</span><span class="n">nbest_3_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;lattice-3best.svg&quot;</span><span class="p">)</span>
<span class="linenos">102</span>
<span class="linenos">103</span><span class="n">nbest_list</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">convert_nbest_to_vector</span><span class="p">(</span><span class="n">nbest_3</span><span class="p">)</span>
<span class="linenos">104</span><span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">nbest_list</span><span class="p">:</span>
<span class="linenos">105</span>    <span class="n">b</span><span class="o">.</span><span class="n">input_symbols</span> <span class="o">=</span> <span class="n">fst</span><span class="o">.</span><span class="n">input_symbols</span>
<span class="linenos">106</span>    <span class="n">b</span><span class="o">.</span><span class="n">output_symbols</span> <span class="o">=</span> <span class="n">fst</span><span class="o">.</span><span class="n">output_symbols</span>
<span class="linenos">107</span>
<span class="linenos">108</span><span class="n">nbest_list_0_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">nbest_list</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">109</span><span class="n">nbest_list_0_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">nbest_list_0_dot</span><span class="p">)</span>
<span class="linenos">110</span><span class="n">nbest_list_0_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;lattice-3best-0.svg&quot;</span><span class="p">)</span>
<span class="linenos">111</span>
<span class="linenos">112</span><span class="n">nbest_list_1_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">nbest_list</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">113</span><span class="n">nbest_list_1_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">nbest_list_1_dot</span><span class="p">)</span>
<span class="linenos">114</span><span class="n">nbest_list_1_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;lattice-3best-1.svg&quot;</span><span class="p">)</span>
<span class="linenos">115</span>
<span class="linenos">116</span><span class="n">nbest_list_2_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">nbest_list</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">117</span><span class="n">nbest_list_2_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">nbest_list_2_dot</span><span class="p">)</span>
<span class="linenos">118</span><span class="n">nbest_list_2_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;lattice-3best-2.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id74" style="width: 600px">
<img alt="lattice.svg" src="../_images/lattice1.svg" /><figcaption>
<p><span class="caption-number">Fig. 32 </span><span class="caption-text">Visualization of lattice.svg</span><a class="headerlink" href="#id74" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id75" style="width: 600px">
<img alt="lattice-3best.svg" src="../_images/lattice-3best.svg" /><figcaption>
<p><span class="caption-number">Fig. 33 </span><span class="caption-text">Visualization of lattice-3best.svg</span><a class="headerlink" href="#id75" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id76" style="width: 600px">
<img alt="lattice-3best-0.svg" src="../_images/lattice-3best-0.svg" /><figcaption>
<p><span class="caption-number">Fig. 34 </span><span class="caption-text">Visualization of lattice-3best-0.svg</span><a class="headerlink" href="#id76" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id77" style="width: 600px">
<img alt="lattice-3best-1.svg" src="../_images/lattice-3best-1.svg" /><figcaption>
<p><span class="caption-number">Fig. 35 </span><span class="caption-text">Visualization of lattice-3best-1.svg</span><a class="headerlink" href="#id77" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id78" style="width: 600px">
<img alt="lattice-3best-2.svg" src="../_images/lattice-3best-2.svg" /><figcaption>
<p><span class="caption-number">Fig. 36 </span><span class="caption-text">Visualization of lattice-3best-2.svg</span><a class="headerlink" href="#id78" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</dd></dl>

</section>
<section id="determinize">
<h2>determinize<a class="headerlink" href="#determinize" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.determinize">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">determinize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ifst</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_kaldifst.StdFst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0009765625</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'functional'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">increment_subsequential_label</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nstate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subsequential_label</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_kaldifst.StdVectorFst</span></span></span><a class="headerlink" href="#kaldifst.determinize" title="Permalink to this definition"></a></dt>
<dd><p>This operation determinizes a weighted transducer.</p>
<p>The result will be an equivalent FST that has the property that no state has
two transitions with the same input label. For this algorithm, epsilon
transitions are treated as regular symbols (cf. RmEpsilon).</p>
<p>See also <a class="reference external" href="https://www.openfst.org/twiki/bin/view/FST/DeterminizeDoc">https://www.openfst.org/twiki/bin/view/FST/DeterminizeDoc</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ifst</strong> – The input FST.</p></li>
<li><p><strong>delta</strong> – Comparison/quantization delta.</p></li>
<li><p><strong>det_type</strong> – Type of determinization: “functional”, “nonfunctional”, “disambiguate”.</p></li>
<li><p><strong>increment_subsequential_label</strong> – Increment subsequential_label to obtain distinct labels for  subsequential
arcs at a given state</p></li>
<li><p><strong>nstate</strong> – State number threshold</p></li>
<li><p><strong>subsequential_label</strong> – Input label of arc corresponding to residual final output when producing a
subsequential transducer</p></li>
<li><p><strong>weight</strong> – Weight threshold</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Return the determinized FST.</p>
</dd>
</dl>
<p><strong>Example 1: Determinize a transducer</strong></p>
<div class="literal-block-wrapper docutils container" id="id79">
<div class="code-block-caption"><span class="caption-number">Listing 22 </span><span class="caption-text">Determinize a transducer.</span><a class="headerlink" href="#id79" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 6</span><span class="s2">0 1 a p 1</span>
<span class="linenos"> 7</span><span class="s2">0 2 a q 2</span>
<span class="linenos"> 8</span><span class="s2">0 1 eps q 3</span>
<span class="linenos"> 9</span><span class="s2">1 3 c r 5</span>
<span class="linenos">10</span><span class="s2">1 3 c r 4</span>
<span class="linenos">11</span><span class="s2">2 3 d s 6</span>
<span class="linenos">12</span><span class="s2">3 0</span>
<span class="linenos">13</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="n">sym1</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym1&quot;</span><span class="p">)</span>
<span class="linenos">16</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;eps&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">17</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">18</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos">19</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="n">sym2</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym2&quot;</span><span class="p">)</span>
<span class="linenos">22</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;eps&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">23</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">24</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;q&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos">25</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="linenos">26</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="linenos">27</span>
<span class="linenos">28</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">s</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">isymbols</span><span class="o">=</span><span class="n">sym1</span><span class="p">,</span> <span class="n">osymbols</span><span class="o">=</span><span class="n">sym2</span><span class="p">)</span>
<span class="linenos">29</span><span class="n">fst</span><span class="o">.</span><span class="n">input_symbols</span> <span class="o">=</span> <span class="n">sym1</span>
<span class="linenos">30</span><span class="n">fst</span><span class="o">.</span><span class="n">output_symbols</span> <span class="o">=</span> <span class="n">sym2</span>
<span class="linenos">31</span>
<span class="linenos">32</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">33</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">34</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;transducer.svg&quot;</span><span class="p">)</span>
<span class="linenos">35</span>
<span class="linenos">36</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">determinize</span><span class="p">(</span><span class="n">fst</span><span class="p">)</span>
<span class="linenos">37</span>
<span class="linenos">38</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">39</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">40</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;transducer2.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id80" style="width: 600px">
<img alt="transducer.svg" src="../_images/transducer.svg" /><figcaption>
<p><span class="caption-number">Fig. 37 </span><span class="caption-text">Visualization of transducer.svg (before determinization)</span><a class="headerlink" href="#id80" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id81" style="width: 600px">
<img alt="transducer2.svg" src="../_images/transducer22.svg" /><figcaption>
<p><span class="caption-number">Fig. 38 </span><span class="caption-text">Visualization of transducer2.svg (after determinization)</span><a class="headerlink" href="#id81" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</dd></dl>

</section>
<section id="determinize-star">
<h2>determinize_star<a class="headerlink" href="#determinize-star" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.determinize_star">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">determinize_star</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_out</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_kaldifst.StdVectorFst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0009765625</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_states</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_log</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#kaldifst.determinize_star" title="Permalink to this definition"></a></dt>
<dd><p>Removes epsilons and determinizes in one step.</p>
<p>See also <a class="reference external" href="https://github.com/kaldi-asr/kaldi/blob/master/src/fstbin/fstdeterminizestar.cc">https://github.com/kaldi-asr/kaldi/blob/master/src/fstbin/fstdeterminizestar.cc</a></p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The input FST is modified in-place.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>in_out</strong> – The input/output FST. Note it is modified in-place.</p></li>
<li><p><strong>delta</strong> – Delta value used to determine equivalence of weights.</p></li>
<li><p><strong>max_states</strong> – Maximum number of states in determinized FST before it will abort.</p></li>
<li><p><strong>use_log</strong> – Determinize in log semiring.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>this function will return <code class="docutils literal notranslate"><span class="pre">False</span></code>
if determinization completed normally, and true if it was stopped early
by reaching the ‘max-states’ limit, and a partial FST was generated.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>The return status is un-intuitive</p>
</dd>
</dl>
<p><strong>Example 1: Determinize a transducer</strong></p>
<div class="literal-block-wrapper docutils container" id="id82">
<div class="code-block-caption"><span class="caption-number">Listing 23 </span><span class="caption-text">Determinize a transducer.</span><a class="headerlink" href="#id82" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 6</span><span class="s2">0 1 a p 1</span>
<span class="linenos"> 7</span><span class="s2">0 2 a q 2</span>
<span class="linenos"> 8</span><span class="s2">0 1 eps q 3</span>
<span class="linenos"> 9</span><span class="s2">1 3 c r 5</span>
<span class="linenos">10</span><span class="s2">1 3 c r 4</span>
<span class="linenos">11</span><span class="s2">2 3 d s 6</span>
<span class="linenos">12</span><span class="s2">3 0</span>
<span class="linenos">13</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="n">sym1</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym1&quot;</span><span class="p">)</span>
<span class="linenos">16</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;eps&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">17</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">18</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos">19</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="n">sym2</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym2&quot;</span><span class="p">)</span>
<span class="linenos">22</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;eps&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">23</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">24</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;q&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos">25</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="linenos">26</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="linenos">27</span>
<span class="linenos">28</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">s</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">isymbols</span><span class="o">=</span><span class="n">sym1</span><span class="p">,</span> <span class="n">osymbols</span><span class="o">=</span><span class="n">sym2</span><span class="p">)</span>
<span class="linenos">29</span><span class="n">fst</span><span class="o">.</span><span class="n">input_symbols</span> <span class="o">=</span> <span class="n">sym1</span>
<span class="linenos">30</span><span class="n">fst</span><span class="o">.</span><span class="n">output_symbols</span> <span class="o">=</span> <span class="n">sym2</span>
<span class="linenos">31</span>
<span class="linenos">32</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">33</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">34</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;transducer.svg&quot;</span><span class="p">)</span>
<span class="linenos">35</span>
<span class="linenos">36</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">determinize_star</span><span class="p">(</span><span class="n">fst</span><span class="p">)</span>
<span class="linenos">37</span>
<span class="linenos">38</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">39</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">40</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;transducer2.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id83" style="width: 600px">
<img alt="transducer.svg" src="../_images/transducer3.svg" /><figcaption>
<p><span class="caption-number">Fig. 39 </span><span class="caption-text">Visualization of transducer.svg (before determinization)</span><a class="headerlink" href="#id83" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id84" style="width: 600px">
<img alt="transducer2.svg" src="../_images/transducer23.svg" /><figcaption>
<p><span class="caption-number">Fig. 40 </span><span class="caption-text">Visualization of transducer2.svg (after determinization)</span><a class="headerlink" href="#id84" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</dd></dl>

</section>
<section id="divide">
<h2>divide<a class="headerlink" href="#divide" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.divide">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">divide</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kaldifst.divide" title="Permalink to this definition"></a></dt>
<dd><p>Overloaded function.</p>
<ol class="arabic simple">
<li><p>divide(arg0: _kaldifst.TropicalWeight, arg1: _kaldifst.TropicalWeight) -&gt; _kaldifst.TropicalWeight</p></li>
<li><p>divide(arg0: _kaldifst.LatticeWeight, arg1: _kaldifst.LatticeWeight) -&gt; _kaldifst.LatticeWeight</p></li>
</ol>
</dd></dl>

</section>
<section id="draw">
<h2>draw<a class="headerlink" href="#draw" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.draw">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">draw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kaldifst.draw" title="Permalink to this definition"></a></dt>
<dd><p>Overloaded function.</p>
<ol class="arabic simple">
<li><p>draw(fst: _kaldifst.StdFst, acceptor: bool = False, isymbols: object = None, osymbols: object = None, ssymbols: object = None, numeric: bool = False, precision: int = 5, float_format: str = ‘g’, show_weight_one: bool = False, title: str = ‘’, portrait: bool = False, vertical: bool = False, fontsize: int = 14, height: float = 11, width: float = 8.5, nodesep: float = 0.25, ranksep: float = 0.4, allow_negative_labels: bool = False) -&gt; str</p></li>
</ol>
<p>Prints FSTs in dot text format.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>You can use the Python package <code class="docutils literal notranslate"><span class="pre">graphviz</span></code> to visualize it.</p>
<p>You can also post the dot format output to
<a class="reference external" href="https://dreampuf.github.io/GraphvizOnline/">https://dreampuf.github.io/GraphvizOnline/</a> to visualize it within
your browser. You can also share the URL to others.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fst</strong> – The FST to be printed.</p></li>
<li><p><strong>acceptor</strong> – Input in acceptor format</p></li>
<li><p><strong>isymbols</strong> – Input label symbol table</p></li>
<li><p><strong>osymbols</strong> – Output label symbol table</p></li>
<li><p><strong>ssymbols</strong> – State label symbol table</p></li>
<li><p><strong>numeric</strong> – Print numeric labels</p></li>
<li><p><strong>precision</strong> – Set precision (number of char/float)</p></li>
<li><p><strong>float_format</strong> – Floating-point format, one of: “e”, “f”, or “g”</p></li>
<li><p><strong>show_weight_one</strong> – Print/draw arc weights and final weights equal to Weight::One()</p></li>
<li><p><strong>title</strong> – Set figure title</p></li>
<li><p><strong>portrait</strong> – Portrait mode (def: landscape)</p></li>
<li><p><strong>vertical</strong> – Draw bottom-to-top instead of left-to-right</p></li>
<li><p><strong>fontsize</strong> – Set fontsize</p></li>
<li><p><strong>height</strong> – Set height</p></li>
<li><p><strong>width</strong> – Set width</p></li>
<li><p><strong>nodesep</strong> – Set minimum separation between nodes (see dot documentation)</p></li>
<li><p><strong>ranksep</strong> – Set minimum separation between ranks (see dot documentation)</p></li>
<li><p><strong>allow_negative_labels</strong> – Allow negative labels (not recommended; may cause conflicts)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Return a string.</p>
</dd>
</dl>
<p><strong>Example 1: Draw a transducer</strong></p>
<div class="literal-block-wrapper docutils container" id="id85">
<div class="code-block-caption"><span class="caption-number">Listing 24 </span><span class="caption-text">Draw a transducer.</span><a class="headerlink" href="#id85" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="n">s1</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 6</span><span class="s2">0 1 a q 1</span>
<span class="linenos"> 7</span><span class="s2">0 2 a r 2.5</span>
<span class="linenos"> 8</span><span class="s2">1 1 c s 1</span>
<span class="linenos"> 9</span><span class="s2">1 0</span>
<span class="linenos">10</span><span class="s2">2 2.5</span>
<span class="linenos">11</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="n">sym1</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym1&quot;</span><span class="p">)</span>
<span class="linenos">14</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">15</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="n">sym2</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym2&quot;</span><span class="p">)</span>
<span class="linenos">18</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;q&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">19</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos">20</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">isymbols</span><span class="o">=</span><span class="n">sym1</span><span class="p">,</span> <span class="n">osymbols</span><span class="o">=</span><span class="n">sym2</span><span class="p">)</span>
<span class="linenos">23</span><span class="n">fst</span><span class="o">.</span><span class="n">input_symbols</span> <span class="o">=</span> <span class="n">sym1</span>
<span class="linenos">24</span><span class="n">fst</span><span class="o">.</span><span class="n">output_symbols</span> <span class="o">=</span> <span class="n">sym2</span>
<span class="linenos">25</span>
<span class="linenos">26</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">27</span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;fst_dot.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="linenos">28</span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">29</span>
<span class="linenos">30</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">31</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;fst.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id86">
<div class="code-block-caption"><span class="caption-number">Listing 25 </span><span class="caption-text">fst_dot.txt</span><a class="headerlink" href="#id86" title="Permalink to this code"></a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">digraph</span> <span class="n">FST</span> <span class="p">{</span>
<span class="linenos"> 2</span><span class="n">rankdir</span> <span class="o">=</span> <span class="n">LR</span><span class="p">;</span>
<span class="linenos"> 3</span><span class="n">size</span> <span class="o">=</span> <span class="s2">&quot;8.5,11&quot;</span><span class="p">;</span>
<span class="linenos"> 4</span><span class="n">center</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="linenos"> 5</span><span class="n">orientation</span> <span class="o">=</span> <span class="n">Portrait</span><span class="p">;</span>
<span class="linenos"> 6</span><span class="n">ranksep</span> <span class="o">=</span> <span class="s2">&quot;0.4&quot;</span><span class="p">;</span>
<span class="linenos"> 7</span><span class="n">nodesep</span> <span class="o">=</span> <span class="s2">&quot;0.25&quot;</span><span class="p">;</span>
<span class="linenos"> 8</span><span class="mi">0</span> <span class="p">[</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="n">shape</span> <span class="o">=</span> <span class="n">circle</span><span class="p">,</span> <span class="n">style</span> <span class="o">=</span> <span class="n">bold</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">]</span>
<span class="linenos"> 9</span>	<span class="mi">0</span> <span class="o">-&gt;</span> <span class="mi">1</span> <span class="p">[</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;a:q/1&quot;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">];</span>
<span class="linenos">10</span>	<span class="mi">0</span> <span class="o">-&gt;</span> <span class="mi">2</span> <span class="p">[</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;a:r/2.5&quot;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">];</span>
<span class="linenos">11</span><span class="mi">1</span> <span class="p">[</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">shape</span> <span class="o">=</span> <span class="n">doublecircle</span><span class="p">,</span> <span class="n">style</span> <span class="o">=</span> <span class="n">solid</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">]</span>
<span class="linenos">12</span>	<span class="mi">1</span> <span class="o">-&gt;</span> <span class="mi">1</span> <span class="p">[</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;c:s/1&quot;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">];</span>
<span class="linenos">13</span><span class="mi">2</span> <span class="p">[</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;2/2.5&quot;</span><span class="p">,</span> <span class="n">shape</span> <span class="o">=</span> <span class="n">doublecircle</span><span class="p">,</span> <span class="n">style</span> <span class="o">=</span> <span class="n">solid</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">]</span>
<span class="linenos">14</span><span class="p">}</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id87" style="width: 600px">
<img alt="fst.svg" src="../_images/fst2.svg" /><figcaption>
<p><span class="caption-number">Fig. 41 </span><span class="caption-text">Visualization of fst.svg</span><a class="headerlink" href="#id87" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<ol class="arabic simple" start="2">
<li><p>draw(fst: _kaldifst.LatticeFst, acceptor: bool = False, isymbols: object = None, osymbols: object = None, ssymbols: object = None, numeric: bool = False, precision: int = 5, float_format: str = ‘g’, show_weight_one: bool = False, title: str = ‘’, portrait: bool = False, vertical: bool = False, fontsize: int = 14, height: float = 11, width: float = 8.5, nodesep: float = 0.25, ranksep: float = 0.4, allow_negative_labels: bool = False) -&gt; str</p></li>
</ol>
<p>Prints FSTs in dot text format.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>You can use the Python package <code class="docutils literal notranslate"><span class="pre">graphviz</span></code> to visualize it.</p>
<p>You can also post the dot format output to
<a class="reference external" href="https://dreampuf.github.io/GraphvizOnline/">https://dreampuf.github.io/GraphvizOnline/</a> to visualize it within
your browser. You can also share the URL to others.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fst</strong> – The FST to be printed.</p></li>
<li><p><strong>acceptor</strong> – Input in acceptor format</p></li>
<li><p><strong>isymbols</strong> – Input label symbol table</p></li>
<li><p><strong>osymbols</strong> – Output label symbol table</p></li>
<li><p><strong>ssymbols</strong> – State label symbol table</p></li>
<li><p><strong>numeric</strong> – Print numeric labels</p></li>
<li><p><strong>precision</strong> – Set precision (number of char/float)</p></li>
<li><p><strong>float_format</strong> – Floating-point format, one of: “e”, “f”, or “g”</p></li>
<li><p><strong>show_weight_one</strong> – Print/draw arc weights and final weights equal to Weight::One()</p></li>
<li><p><strong>title</strong> – Set figure title</p></li>
<li><p><strong>portrait</strong> – Portrait mode (def: landscape)</p></li>
<li><p><strong>vertical</strong> – Draw bottom-to-top instead of left-to-right</p></li>
<li><p><strong>fontsize</strong> – Set fontsize</p></li>
<li><p><strong>height</strong> – Set height</p></li>
<li><p><strong>width</strong> – Set width</p></li>
<li><p><strong>nodesep</strong> – Set minimum separation between nodes (see dot documentation)</p></li>
<li><p><strong>ranksep</strong> – Set minimum separation between ranks (see dot documentation)</p></li>
<li><p><strong>allow_negative_labels</strong> – Allow negative labels (not recommended; may cause conflicts)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Return a string.</p>
</dd>
</dl>
<p><strong>Example 1: Draw a transducer</strong></p>
<div class="literal-block-wrapper docutils container" id="id88">
<div class="code-block-caption"><span class="caption-number">Listing 26 </span><span class="caption-text">Draw a transducer.</span><a class="headerlink" href="#id88" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="n">s1</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 6</span><span class="s2">0 1 a q 1</span>
<span class="linenos"> 7</span><span class="s2">0 2 a r 2.5</span>
<span class="linenos"> 8</span><span class="s2">1 1 c s 1</span>
<span class="linenos"> 9</span><span class="s2">1 0</span>
<span class="linenos">10</span><span class="s2">2 2.5</span>
<span class="linenos">11</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="n">sym1</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym1&quot;</span><span class="p">)</span>
<span class="linenos">14</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">15</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="n">sym2</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym2&quot;</span><span class="p">)</span>
<span class="linenos">18</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;q&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">19</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos">20</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">isymbols</span><span class="o">=</span><span class="n">sym1</span><span class="p">,</span> <span class="n">osymbols</span><span class="o">=</span><span class="n">sym2</span><span class="p">)</span>
<span class="linenos">23</span><span class="n">fst</span><span class="o">.</span><span class="n">input_symbols</span> <span class="o">=</span> <span class="n">sym1</span>
<span class="linenos">24</span><span class="n">fst</span><span class="o">.</span><span class="n">output_symbols</span> <span class="o">=</span> <span class="n">sym2</span>
<span class="linenos">25</span>
<span class="linenos">26</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">27</span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;fst_dot.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="linenos">28</span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">29</span>
<span class="linenos">30</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">31</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;fst.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id89">
<div class="code-block-caption"><span class="caption-number">Listing 27 </span><span class="caption-text">fst_dot.txt</span><a class="headerlink" href="#id89" title="Permalink to this code"></a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">digraph</span> <span class="n">FST</span> <span class="p">{</span>
<span class="linenos"> 2</span><span class="n">rankdir</span> <span class="o">=</span> <span class="n">LR</span><span class="p">;</span>
<span class="linenos"> 3</span><span class="n">size</span> <span class="o">=</span> <span class="s2">&quot;8.5,11&quot;</span><span class="p">;</span>
<span class="linenos"> 4</span><span class="n">center</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="linenos"> 5</span><span class="n">orientation</span> <span class="o">=</span> <span class="n">Portrait</span><span class="p">;</span>
<span class="linenos"> 6</span><span class="n">ranksep</span> <span class="o">=</span> <span class="s2">&quot;0.4&quot;</span><span class="p">;</span>
<span class="linenos"> 7</span><span class="n">nodesep</span> <span class="o">=</span> <span class="s2">&quot;0.25&quot;</span><span class="p">;</span>
<span class="linenos"> 8</span><span class="mi">0</span> <span class="p">[</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="n">shape</span> <span class="o">=</span> <span class="n">circle</span><span class="p">,</span> <span class="n">style</span> <span class="o">=</span> <span class="n">bold</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">]</span>
<span class="linenos"> 9</span>	<span class="mi">0</span> <span class="o">-&gt;</span> <span class="mi">1</span> <span class="p">[</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;a:q/1&quot;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">];</span>
<span class="linenos">10</span>	<span class="mi">0</span> <span class="o">-&gt;</span> <span class="mi">2</span> <span class="p">[</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;a:r/2.5&quot;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">];</span>
<span class="linenos">11</span><span class="mi">1</span> <span class="p">[</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">shape</span> <span class="o">=</span> <span class="n">doublecircle</span><span class="p">,</span> <span class="n">style</span> <span class="o">=</span> <span class="n">solid</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">]</span>
<span class="linenos">12</span>	<span class="mi">1</span> <span class="o">-&gt;</span> <span class="mi">1</span> <span class="p">[</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;c:s/1&quot;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">];</span>
<span class="linenos">13</span><span class="mi">2</span> <span class="p">[</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;2/2.5&quot;</span><span class="p">,</span> <span class="n">shape</span> <span class="o">=</span> <span class="n">doublecircle</span><span class="p">,</span> <span class="n">style</span> <span class="o">=</span> <span class="n">solid</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">14</span><span class="p">]</span>
<span class="linenos">14</span><span class="p">}</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id90" style="width: 600px">
<img alt="fst.svg" src="../_images/fst2.svg" /><figcaption>
<p><span class="caption-number">Fig. 42 </span><span class="caption-text">Visualization of fst.svg</span><a class="headerlink" href="#id90" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</dd></dl>

</section>
<section id="equal-align">
<h2>equal_align<a class="headerlink" href="#equal-align" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.equal_align">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">equal_align</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ifst</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_kaldifst.StdVectorFst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rand_seed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_retries</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">_kaldifst.StdVectorFst</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#kaldifst.equal_align" title="Permalink to this definition"></a></dt>
<dd><p>Get a random linear path from an FST.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ifst</strong> – The input fst.</p></li>
<li><p><strong>length</strong> – Path length of the output fst. If the ilabel of an arc is 0, then this
arc does not contribute to the total path length of the output fst.</p></li>
<li><p><strong>rand_seed</strong> – A seed for random selecting arcs out of each state.</p></li>
<li><p><strong>num_retries</strong> – After trying this number but failed to generate a valid fst, it would
return False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>succeeded, True if we successfully found a path.</p></li>
<li><p>fst, the output fst.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Return a tuple containing</p>
</dd>
</dl>
<p><strong>Example 1: Equal align</strong></p>
<div class="literal-block-wrapper docutils container" id="id91">
<div class="code-block-caption"><span class="caption-number">Listing 28 </span><span class="caption-text">Code for equal_align</span><a class="headerlink" href="#id91" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="n">s1</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 6</span><span class="s2">0 0 e E 0.3</span>
<span class="linenos"> 7</span><span class="s2">0 1 a A 1</span>
<span class="linenos"> 8</span><span class="s2">0 1 b B 2.5</span>
<span class="linenos"> 9</span><span class="s2">1 2 &lt;eps&gt; &lt;eps&gt; 0.3</span>
<span class="linenos">10</span><span class="s2">1 2 &lt;eps&gt; &lt;eps&gt; 0.4</span>
<span class="linenos">11</span><span class="s2">1 1 f F 0.03</span>
<span class="linenos">12</span><span class="s2">2 2 g G 0.8</span>
<span class="linenos">13</span><span class="s2">2 3 h H 0.12</span>
<span class="linenos">14</span><span class="s2">3</span>
<span class="linenos">15</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="n">sym1</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym1&quot;</span><span class="p">)</span>
<span class="linenos">18</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;&lt;eps&gt;&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">19</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">20</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos">21</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="linenos">22</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="linenos">23</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="linenos">24</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;f&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="linenos">25</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;g&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
<span class="linenos">26</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;h&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="linenos">27</span>
<span class="linenos">28</span><span class="n">sym2</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym2&quot;</span><span class="p">)</span>
<span class="linenos">29</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;&lt;eps&gt;&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">30</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">31</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos">32</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="linenos">33</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="linenos">34</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;E&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="linenos">35</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="linenos">36</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;G&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
<span class="linenos">37</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;H&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="linenos">38</span>
<span class="linenos">39</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">isymbols</span><span class="o">=</span><span class="n">sym1</span><span class="p">,</span> <span class="n">osymbols</span><span class="o">=</span><span class="n">sym2</span><span class="p">)</span>
<span class="linenos">40</span>
<span class="linenos">41</span><span class="n">fst</span><span class="o">.</span><span class="n">input_symbols</span> <span class="o">=</span> <span class="n">sym1</span>
<span class="linenos">42</span><span class="n">fst</span><span class="o">.</span><span class="n">output_symbols</span> <span class="o">=</span> <span class="n">sym2</span>
<span class="linenos">43</span>
<span class="linenos">44</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">45</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">46</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;input.svg&quot;</span><span class="p">)</span>
<span class="linenos">47</span>
<span class="linenos">48</span><span class="n">succeeded</span><span class="p">,</span> <span class="n">first</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">equal_align</span><span class="p">(</span>
<span class="linenos">49</span>    <span class="n">ifst</span><span class="o">=</span><span class="n">fst</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">rand_seed</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">num_retries</span><span class="o">=</span><span class="mi">10</span>
<span class="linenos">50</span><span class="p">)</span>
<span class="linenos">51</span><span class="k">assert</span> <span class="n">succeeded</span> <span class="ow">is</span> <span class="kc">True</span>
<span class="linenos">52</span><span class="n">first</span><span class="o">.</span><span class="n">input_symbols</span> <span class="o">=</span> <span class="n">sym1</span>
<span class="linenos">53</span><span class="n">first</span><span class="o">.</span><span class="n">output_symbols</span> <span class="o">=</span> <span class="n">sym1</span>
<span class="linenos">54</span>
<span class="linenos">55</span><span class="n">first_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">56</span><span class="n">first_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">first_dot</span><span class="p">)</span>
<span class="linenos">57</span><span class="n">first_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;first.svg&quot;</span><span class="p">)</span>
<span class="linenos">58</span>
<span class="linenos">59</span><span class="n">succeeded</span><span class="p">,</span> <span class="n">second</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">equal_align</span><span class="p">(</span>
<span class="linenos">60</span>    <span class="n">ifst</span><span class="o">=</span><span class="n">fst</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">rand_seed</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">num_retries</span><span class="o">=</span><span class="mi">10</span>
<span class="linenos">61</span><span class="p">)</span>
<span class="linenos">62</span><span class="k">assert</span> <span class="n">succeeded</span> <span class="ow">is</span> <span class="kc">True</span>
<span class="linenos">63</span><span class="n">second</span><span class="o">.</span><span class="n">input_symbols</span> <span class="o">=</span> <span class="n">sym1</span>
<span class="linenos">64</span><span class="n">second</span><span class="o">.</span><span class="n">output_symbols</span> <span class="o">=</span> <span class="n">sym2</span>
<span class="linenos">65</span>
<span class="linenos">66</span><span class="n">second_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">second</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">67</span><span class="n">second_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">second_dot</span><span class="p">)</span>
<span class="linenos">68</span><span class="n">second_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;second.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id92" style="width: 600px">
<img alt="input.svg" src="../_images/input.svg" /><figcaption>
<p><span class="caption-number">Fig. 43 </span><span class="caption-text">Visualization of input.svg</span><a class="headerlink" href="#id92" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id93" style="width: 600px">
<img alt="first.svg" src="../_images/first.svg" /><figcaption>
<p><span class="caption-number">Fig. 44 </span><span class="caption-text">Visualization of first.svg</span><a class="headerlink" href="#id93" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id94" style="width: 600px">
<img alt="second.svg" src="../_images/second.svg" /><figcaption>
<p><span class="caption-number">Fig. 45 </span><span class="caption-text">Visualization of second.svg</span><a class="headerlink" href="#id94" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</dd></dl>

</section>
<section id="get-linear-symbol-sequence">
<h2>get_linear_symbol_sequence<a class="headerlink" href="#get-linear-symbol-sequence" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.get_linear_symbol_sequence">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">get_linear_symbol_sequence</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kaldifst.get_linear_symbol_sequence" title="Permalink to this definition"></a></dt>
<dd><p>Overloaded function.</p>
<ol class="arabic simple">
<li><p>get_linear_symbol_sequence(fst: _kaldifst.StdFst) -&gt; Tuple[bool, List[int], List[int], _kaldifst.TropicalWeight]</p></li>
</ol>
<p>get_linear_symbol_sequence gets the symbol sequence from a linear FST.
If the FST is not just a linear sequence, it returns false.   If it is
a linear sequence (including the empty FST), it returns true.  In this
case it outputs the symbol</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fst</strong> – The input fst.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>succeeded, bool, true if it succeeded.</p></li>
<li><p>isymbols_out, List[int], containing non-zero input symbols</p></li>
<li><p>osymbols_out, List[int], containing non-zero output symbols</p></li>
<li><p>total_weight_out, float, the total weight</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Return a tuple containing</p>
</dd>
</dl>
<p><strong>Example 1: get_linear_symbol_sequence</strong></p>
<div class="literal-block-wrapper docutils container" id="id95">
<div class="code-block-caption"><span class="caption-number">Listing 29 </span><span class="caption-text">Code for get_linear_symbol_sequence</span><a class="headerlink" href="#id95" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 6</span><span class="s2">0 1 0 2 0.5</span>
<span class="linenos"> 7</span><span class="s2">1 2 1 3 0.8</span>
<span class="linenos"> 8</span><span class="s2">2 3 3 5 0.7</span>
<span class="linenos"> 9</span><span class="s2">3 4 9 0 0.1</span>
<span class="linenos">10</span><span class="s2">4 0.2</span>
<span class="linenos">11</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">12</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">s</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="p">(</span>
<span class="linenos">17</span>    <span class="n">succeeded</span><span class="p">,</span>
<span class="linenos">18</span>    <span class="n">isymbols_out</span><span class="p">,</span>
<span class="linenos">19</span>    <span class="n">osymbols_out</span><span class="p">,</span>
<span class="linenos">20</span>    <span class="n">total_weight</span><span class="p">,</span>
<span class="linenos">21</span><span class="p">)</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">get_linear_symbol_sequence</span><span class="p">(</span><span class="n">fst</span><span class="p">)</span>
<span class="linenos">22</span><span class="k">assert</span> <span class="n">succeeded</span> <span class="ow">is</span> <span class="kc">True</span>
<span class="linenos">23</span><span class="k">assert</span> <span class="n">isymbols_out</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="linenos">24</span><span class="k">assert</span> <span class="n">osymbols_out</span> <span class="o">==</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="linenos">25</span>
<span class="linenos">26</span><span class="k">assert</span> <span class="p">(</span>
<span class="linenos">27</span>    <span class="nb">abs</span><span class="p">(</span><span class="n">total_weight</span><span class="o">.</span><span class="n">value</span> <span class="o">-</span> <span class="p">(</span><span class="mf">0.5</span> <span class="o">+</span> <span class="mf">0.8</span> <span class="o">+</span> <span class="mf">0.7</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.2</span><span class="p">))</span> <span class="o">&lt;</span> <span class="mf">1e-3</span>
<span class="linenos">28</span><span class="p">),</span> <span class="n">total_weight</span><span class="o">.</span><span class="n">value</span>
</pre></div>
</div>
</div>
<ol class="arabic simple" start="2">
<li><p>get_linear_symbol_sequence(fst: _kaldifst.LatticeFst) -&gt; Tuple[bool, List[int], List[int], _kaldifst.LatticeWeight]</p></li>
</ol>
<p>get_linear_symbol_sequence gets the symbol sequence from a linear FST.
If the FST is not just a linear sequence, it returns false.   If it is
a linear sequence (including the empty FST), it returns true.  In this
case it outputs the symbol</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fst</strong> – The input fst.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>succeeded, bool, true if it succeeded.</p></li>
<li><p>isymbols_out, List[int], containing non-zero input symbols</p></li>
<li><p>osymbols_out, List[int], containing non-zero output symbols</p></li>
<li><p>total_weight_out, float, the total weight</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Return a tuple containing</p>
</dd>
</dl>
<p><strong>Example 1: get_linear_symbol_sequence</strong></p>
<div class="literal-block-wrapper docutils container" id="id96">
<div class="code-block-caption"><span class="caption-number">Listing 30 </span><span class="caption-text">Code for get_linear_symbol_sequence</span><a class="headerlink" href="#id96" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 6</span><span class="s2">0 1 0 2 0.5</span>
<span class="linenos"> 7</span><span class="s2">1 2 1 3 0.8</span>
<span class="linenos"> 8</span><span class="s2">2 3 3 5 0.7</span>
<span class="linenos"> 9</span><span class="s2">3 4 9 0 0.1</span>
<span class="linenos">10</span><span class="s2">4 0.2</span>
<span class="linenos">11</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">12</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">s</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="p">(</span>
<span class="linenos">17</span>    <span class="n">succeeded</span><span class="p">,</span>
<span class="linenos">18</span>    <span class="n">isymbols_out</span><span class="p">,</span>
<span class="linenos">19</span>    <span class="n">osymbols_out</span><span class="p">,</span>
<span class="linenos">20</span>    <span class="n">total_weight</span><span class="p">,</span>
<span class="linenos">21</span><span class="p">)</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">get_linear_symbol_sequence</span><span class="p">(</span><span class="n">fst</span><span class="p">)</span>
<span class="linenos">22</span><span class="k">assert</span> <span class="n">succeeded</span> <span class="ow">is</span> <span class="kc">True</span>
<span class="linenos">23</span><span class="k">assert</span> <span class="n">isymbols_out</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="linenos">24</span><span class="k">assert</span> <span class="n">osymbols_out</span> <span class="o">==</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="linenos">25</span>
<span class="linenos">26</span><span class="k">assert</span> <span class="p">(</span>
<span class="linenos">27</span>    <span class="nb">abs</span><span class="p">(</span><span class="n">total_weight</span><span class="o">.</span><span class="n">value</span> <span class="o">-</span> <span class="p">(</span><span class="mf">0.5</span> <span class="o">+</span> <span class="mf">0.8</span> <span class="o">+</span> <span class="mf">0.7</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.2</span><span class="p">))</span> <span class="o">&lt;</span> <span class="mf">1e-3</span>
<span class="linenos">28</span><span class="p">),</span> <span class="n">total_weight</span><span class="o">.</span><span class="n">value</span>
</pre></div>
</div>
</div>
</dd></dl>

</section>
<section id="info">
<h2>info<a class="headerlink" href="#info" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.info">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fst</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_kaldifst.StdFst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arc_filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'any'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pipe</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_properties</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fst_verify</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kaldifst.info" title="Permalink to this definition"></a></dt>
<dd><p>–arc_filter: type = string, default = “any”
Arc filter: one of: “any”, “epsilon”, “iepsilon”, “oepsilon”;
this only affects the counts of (co)accessible states, connected states,
and (strongly) connected components
–fst_verify: type = bool, default = true
Verify FST sanity
–info_type: type = string, default = “auto”
Info format: one of: “auto”, “long”, “short”
–pipe: type = bool, default = false
Send info to stderr, input to stdout
–test_properties: type = bool, default = true
Compute property values (if unknown to FST)</p>
</dd></dl>

</section>
<section id="invert">
<h2>invert<a class="headerlink" href="#invert" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.invert">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">invert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_out</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_kaldifst.StdMutableFst</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kaldifst.invert" title="Permalink to this definition"></a></dt>
<dd><p>This operation inverts the transduction corresponding to an FST by
exchanging the FST’s input and output labels.</p>
<p>See also <a class="reference external" href="https://www.openfst.org/twiki/bin/view/FST/InvertDoc">https://www.openfst.org/twiki/bin/view/FST/InvertDoc</a></p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The FST is modified in-place.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>in_out</strong> – A transducer. It is modified in-place.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Return <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
<p><strong>Example Invert a transducer</strong></p>
<div class="literal-block-wrapper docutils container" id="id97">
<div class="code-block-caption"><span class="caption-number">Listing 31 </span><span class="caption-text">Invert a transducer</span><a class="headerlink" href="#id97" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python3</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 8</span><span class="s2">0 1 a y 1</span>
<span class="linenos"> 9</span><span class="s2">0 1 b x 3</span>
<span class="linenos">10</span><span class="s2">1 1 d v 7</span>
<span class="linenos">11</span><span class="s2">1 2 c w 5</span>
<span class="linenos">12</span><span class="s2">2 3 f u 9</span>
<span class="linenos">13</span><span class="s2">3 2</span>
<span class="linenos">14</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">15</span><span class="n">isym</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span>
<span class="linenos">16</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">17</span><span class="sd">        a 1</span>
<span class="linenos">18</span><span class="sd">        b 2</span>
<span class="linenos">19</span><span class="sd">        c 3</span>
<span class="linenos">20</span><span class="sd">        d 4</span>
<span class="linenos">21</span><span class="sd">        f 5</span>
<span class="linenos">22</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">23</span><span class="p">)</span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="n">osym</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span>
<span class="linenos">26</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">27</span><span class="sd">        x 1</span>
<span class="linenos">28</span><span class="sd">        y 2</span>
<span class="linenos">29</span><span class="sd">        u 3</span>
<span class="linenos">30</span><span class="sd">        w 4</span>
<span class="linenos">31</span><span class="sd">        v 5</span>
<span class="linenos">32</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">33</span><span class="p">)</span>
<span class="linenos">34</span>
<span class="linenos">35</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
<span class="linenos">36</span>    <span class="n">s</span><span class="p">,</span>
<span class="linenos">37</span>    <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">38</span>    <span class="n">isymbols</span><span class="o">=</span><span class="n">isym</span><span class="p">,</span>
<span class="linenos">39</span>    <span class="n">osymbols</span><span class="o">=</span><span class="n">osym</span><span class="p">,</span>
<span class="linenos">40</span>    <span class="n">keep_isymbols</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">41</span>    <span class="n">keep_osymbols</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">42</span><span class="p">)</span>
<span class="linenos">43</span>
<span class="linenos">44</span>
<span class="linenos">45</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">46</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">47</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;before-invert.svg&quot;</span><span class="p">)</span>
<span class="linenos">48</span>
<span class="linenos">49</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">invert</span><span class="p">(</span><span class="n">fst</span><span class="p">)</span>
<span class="linenos">50</span>
<span class="linenos">51</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">52</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">53</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;after-invert.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id98" style="width: 600px">
<img alt="before-invert.svg" src="../_images/before-invert.svg" /><figcaption>
<p><span class="caption-number">Fig. 46 </span><span class="caption-text">Visualization of before-invert.svg</span><a class="headerlink" href="#id98" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id99" style="width: 600px">
<img alt="after-invert.svg" src="../_images/after-invert.svg" /><figcaption>
<p><span class="caption-number">Fig. 47 </span><span class="caption-text">Visualization of after-invert.svg</span><a class="headerlink" href="#id99" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</dd></dl>

</section>
<section id="lattice-scale">
<h2>lattice_scale<a class="headerlink" href="#lattice-scale" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.lattice_scale">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">lattice_scale</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lmwt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acwt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#kaldifst.lattice_scale" title="Permalink to this definition"></a></dt>
<dd><p>Return a diagonal scale matrix with specified LM scale <code class="docutils literal notranslate"><span class="pre">lmwt</span></code>
and AM scale <code class="docutils literal notranslate"><span class="pre">amwt</span></code>.</p>
<p>Note that the diagonal matrix is a list of list, e.g.,
<code class="docutils literal notranslate"><span class="pre">[[lmwt,</span> <span class="pre">0],</span> <span class="pre">[0,</span> <span class="pre">acwt]]</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lmwt</strong> – Scale for language model scores.</p></li>
<li><p><strong>acwt</strong> – Scale for acoustic likelihoods.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>A list-of-list containing <code class="docutils literal notranslate"><span class="pre">[[lmwt,</span> <span class="pre">0],</span> <span class="pre">[0,</span> <span class="pre">acwt]]</span></code>.</p></li>
</ul>
</p>
</dd>
</dl>
<p><strong>Example 1: Return a matrix with lmwt=0.1, acwt=10.0</strong></p>
<div class="literal-block-wrapper docutils container" id="id100">
<div class="code-block-caption"><span class="caption-number">Listing 32 </span><span class="caption-text">Return a matrix with lmwt=0.1, acwt=10.0</span><a class="headerlink" href="#id100" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="ch">#!/usr/bin/env python3</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos">4</span>
<span class="linenos">5</span><span class="n">m</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">lattice_scale</span><span class="p">(</span><span class="n">lmwt</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">acwt</span><span class="o">=</span><span class="mf">10.0</span><span class="p">)</span>
<span class="linenos">6</span><span class="k">assert</span> <span class="n">m</span> <span class="o">==</span> <span class="p">[[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">]],</span> <span class="n">m</span>
</pre></div>
</div>
</div>
</dd></dl>

</section>
<section id="lattice-to-nbest">
<h2>lattice_to_nbest<a class="headerlink" href="#lattice-to-nbest" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.lattice_to_nbest">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">lattice_to_nbest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acoustic_scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lm_scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kaldifst.lattice_to_nbest" title="Permalink to this definition"></a></dt>
<dd><p>Work out N-best paths in lattices</p>
<p>It implements
<a class="reference external" href="https://github.com/kaldi-asr/kaldi/blob/master/src/latbin/lattice-to-nbest.cc">https://github.com/kaldi-asr/kaldi/blob/master/src/latbin/lattice-to-nbest.cc</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lat</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Lattice</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">StdVectorFst</span></code>]) – The input lattice.</p></li>
<li><p><strong>acoustic_scale</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Scaling factor for acoustic likelihoods.</p></li>
<li><p><strong>lm_scale</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Scaling factor for language model scores.</p></li>
<li><p><strong>n</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – Number of distinct paths.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code>[<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Lattice</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">StdVectorFst</span></code>]]</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Return a list of linear FSTs.</p>
</dd>
</dl>
<p><strong>Example for a StdVectorFst</strong></p>
<div class="literal-block-wrapper docutils container" id="id101">
<div class="code-block-caption"><span class="caption-number">Listing 33 </span><span class="caption-text">lattice_to_nbest for a StdVectorFst</span><a class="headerlink" href="#id101" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python3</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="n">s1</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 8</span><span class="s2">0 1 a 0.1</span>
<span class="linenos"> 9</span><span class="s2">0 2 b 0.1</span>
<span class="linenos">10</span><span class="s2">1 3 c 0.4</span>
<span class="linenos">11</span><span class="s2">1 3 d 0.2</span>
<span class="linenos">12</span><span class="s2">2 3 c 0.3</span>
<span class="linenos">13</span><span class="s2">2 3 d 0.2</span>
<span class="linenos">14</span><span class="s2">3 0</span>
<span class="linenos">15</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="n">sym1</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym1&quot;</span><span class="p">)</span>
<span class="linenos">18</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;eps&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">19</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">20</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos">21</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="linenos">22</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="linenos">23</span>
<span class="linenos">24</span><span class="n">a</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">isymbols</span><span class="o">=</span><span class="n">sym1</span><span class="p">)</span>
<span class="linenos">25</span><span class="n">a</span><span class="o">.</span><span class="n">input_symbols</span> <span class="o">=</span> <span class="n">sym1</span>
<span class="linenos">26</span>
<span class="linenos">27</span><span class="n">a_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">28</span><span class="n">a_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">a_dot</span><span class="p">)</span>
<span class="linenos">29</span><span class="n">a_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;vector-fst.svg&quot;</span><span class="p">)</span>
<span class="linenos">30</span>
<span class="linenos">31</span><span class="n">nbest_list</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">lattice_to_nbest</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="linenos">32</span><span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">nbest_list</span><span class="p">:</span>
<span class="linenos">33</span>    <span class="n">b</span><span class="o">.</span><span class="n">input_symbols</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">input_symbols</span>
<span class="linenos">34</span>    <span class="n">b</span><span class="o">.</span><span class="n">output_symbols</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">output_symbols</span>
<span class="linenos">35</span>
<span class="linenos">36</span><span class="n">nbest_list_0_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">nbest_list</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">37</span><span class="n">nbest_list_0_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">nbest_list_0_dot</span><span class="p">)</span>
<span class="linenos">38</span><span class="n">nbest_list_0_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;vector-fst-3best-0.svg&quot;</span><span class="p">)</span>
<span class="linenos">39</span>
<span class="linenos">40</span><span class="n">nbest_list_1_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">nbest_list</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">41</span><span class="n">nbest_list_1_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">nbest_list_1_dot</span><span class="p">)</span>
<span class="linenos">42</span><span class="n">nbest_list_1_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;vector-fst-3best-1.svg&quot;</span><span class="p">)</span>
<span class="linenos">43</span>
<span class="linenos">44</span><span class="n">nbest_list_2_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">nbest_list</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">45</span><span class="n">nbest_list_2_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">nbest_list_2_dot</span><span class="p">)</span>
<span class="linenos">46</span><span class="n">nbest_list_2_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;vector-fst-3best-2.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id102" style="width: 600px">
<img alt="vector-fst.svg" src="../_images/vector-fst1.svg" /><figcaption>
<p><span class="caption-number">Fig. 48 </span><span class="caption-text">Visualization of vector-fst.svg</span><a class="headerlink" href="#id102" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id103" style="width: 600px">
<img alt="vector-fst-3best-0.svg" src="../_images/vector-fst-3best-01.svg" /><figcaption>
<p><span class="caption-number">Fig. 49 </span><span class="caption-text">Visualization of vector-fst-3best-0.svg</span><a class="headerlink" href="#id103" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id104" style="width: 600px">
<img alt="vector-fst-3best-1.svg" src="../_images/vector-fst-3best-11.svg" /><figcaption>
<p><span class="caption-number">Fig. 50 </span><span class="caption-text">Visualization of vector-fst-3best-1.svg</span><a class="headerlink" href="#id104" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id105" style="width: 600px">
<img alt="vector-fst-3best-2.svg" src="../_images/vector-fst-3best-21.svg" /><figcaption>
<p><span class="caption-number">Fig. 51 </span><span class="caption-text">Visualization of vector-fst-3best-2.svg</span><a class="headerlink" href="#id105" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p><strong>Example for a Lattice</strong></p>
<div class="literal-block-wrapper docutils container" id="id106">
<div class="code-block-caption"><span class="caption-number">Listing 34 </span><span class="caption-text">lattice_to_nbest for a Lattice</span><a class="headerlink" href="#id106" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="ch">#!/usr/bin/env python3</span>
<span class="linenos">  2</span>
<span class="linenos">  3</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos">  4</span>
<span class="linenos">  5</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos">  6</span>
<span class="linenos">  7</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">Lattice</span><span class="p">()</span>
<span class="linenos">  8</span><span class="n">s0</span> <span class="o">=</span> <span class="n">fst</span><span class="o">.</span><span class="n">add_state</span><span class="p">()</span>
<span class="linenos">  9</span><span class="n">s1</span> <span class="o">=</span> <span class="n">fst</span><span class="o">.</span><span class="n">add_state</span><span class="p">()</span>
<span class="linenos"> 10</span><span class="n">s2</span> <span class="o">=</span> <span class="n">fst</span><span class="o">.</span><span class="n">add_state</span><span class="p">()</span>
<span class="linenos"> 11</span><span class="n">s3</span> <span class="o">=</span> <span class="n">fst</span><span class="o">.</span><span class="n">add_state</span><span class="p">()</span>
<span class="linenos"> 12</span>
<span class="linenos"> 13</span><span class="n">fst</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">s0</span>
<span class="linenos"> 14</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos"> 15</span>    <span class="n">state</span><span class="o">=</span><span class="n">s0</span><span class="p">,</span>
<span class="linenos"> 16</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos"> 17</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="linenos"> 18</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="linenos"> 19</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.08</span><span class="p">),</span>
<span class="linenos"> 20</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span>
<span class="linenos"> 21</span>    <span class="p">),</span>
<span class="linenos"> 22</span><span class="p">)</span>
<span class="linenos"> 23</span>
<span class="linenos"> 24</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos"> 25</span>    <span class="n">state</span><span class="o">=</span><span class="n">s0</span><span class="p">,</span>
<span class="linenos"> 26</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos"> 27</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="linenos"> 28</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="linenos"> 29</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.03</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.07</span><span class="p">),</span>
<span class="linenos"> 30</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s2</span><span class="p">,</span>
<span class="linenos"> 31</span>    <span class="p">),</span>
<span class="linenos"> 32</span><span class="p">)</span>
<span class="linenos"> 33</span>
<span class="linenos"> 34</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos"> 35</span>    <span class="n">state</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span>
<span class="linenos"> 36</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos"> 37</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos"> 38</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos"> 39</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.3</span><span class="p">),</span>
<span class="linenos"> 40</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s3</span><span class="p">,</span>
<span class="linenos"> 41</span>    <span class="p">),</span>
<span class="linenos"> 42</span><span class="p">)</span>
<span class="linenos"> 43</span>
<span class="linenos"> 44</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos"> 45</span>    <span class="n">state</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span>
<span class="linenos"> 46</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos"> 47</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="linenos"> 48</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="linenos"> 49</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.05</span><span class="p">),</span>
<span class="linenos"> 50</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s3</span><span class="p">,</span>
<span class="linenos"> 51</span>    <span class="p">),</span>
<span class="linenos"> 52</span><span class="p">)</span>
<span class="linenos"> 53</span>
<span class="linenos"> 54</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos"> 55</span>    <span class="n">state</span><span class="o">=</span><span class="n">s2</span><span class="p">,</span>
<span class="linenos"> 56</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos"> 57</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos"> 58</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos"> 59</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.15</span><span class="p">),</span>
<span class="linenos"> 60</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s3</span><span class="p">,</span>
<span class="linenos"> 61</span>    <span class="p">),</span>
<span class="linenos"> 62</span><span class="p">)</span>
<span class="linenos"> 63</span>
<span class="linenos"> 64</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos"> 65</span>    <span class="n">state</span><span class="o">=</span><span class="n">s2</span><span class="p">,</span>
<span class="linenos"> 66</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos"> 67</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="linenos"> 68</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="linenos"> 69</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.15</span><span class="p">),</span>
<span class="linenos"> 70</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s3</span><span class="p">,</span>
<span class="linenos"> 71</span>    <span class="p">),</span>
<span class="linenos"> 72</span><span class="p">)</span>
<span class="linenos"> 73</span>
<span class="linenos"> 74</span><span class="n">fst</span><span class="o">.</span><span class="n">set_final</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="n">s3</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="o">.</span><span class="n">one</span><span class="p">)</span>
<span class="linenos"> 75</span>
<span class="linenos"> 76</span>
<span class="linenos"> 77</span><span class="n">sym1</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym1&quot;</span><span class="p">)</span>
<span class="linenos"> 78</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;eps&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos"> 79</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos"> 80</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos"> 81</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="linenos"> 82</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="linenos"> 83</span>
<span class="linenos"> 84</span><span class="n">sym2</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym2&quot;</span><span class="p">)</span>
<span class="linenos"> 85</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;eps&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos"> 86</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos"> 87</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos"> 88</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="linenos"> 89</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="linenos"> 90</span>
<span class="linenos"> 91</span><span class="n">fst</span><span class="o">.</span><span class="n">input_symbols</span> <span class="o">=</span> <span class="n">sym1</span>
<span class="linenos"> 92</span><span class="n">fst</span><span class="o">.</span><span class="n">output_symbols</span> <span class="o">=</span> <span class="n">sym2</span>
<span class="linenos"> 93</span>
<span class="linenos"> 94</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos"> 95</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos"> 96</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;lattice.svg&quot;</span><span class="p">)</span>
<span class="linenos"> 97</span>
<span class="linenos"> 98</span><span class="n">nbest_list</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">lattice_to_nbest</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="linenos"> 99</span><span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">nbest_list</span><span class="p">:</span>
<span class="linenos">100</span>    <span class="n">b</span><span class="o">.</span><span class="n">input_symbols</span> <span class="o">=</span> <span class="n">fst</span><span class="o">.</span><span class="n">input_symbols</span>
<span class="linenos">101</span>    <span class="n">b</span><span class="o">.</span><span class="n">output_symbols</span> <span class="o">=</span> <span class="n">fst</span><span class="o">.</span><span class="n">output_symbols</span>
<span class="linenos">102</span>
<span class="linenos">103</span><span class="n">nbest_list_0_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">nbest_list</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">104</span><span class="n">nbest_list_0_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">nbest_list_0_dot</span><span class="p">)</span>
<span class="linenos">105</span><span class="n">nbest_list_0_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;lattice-3best-0.svg&quot;</span><span class="p">)</span>
<span class="linenos">106</span>
<span class="linenos">107</span><span class="n">nbest_list_1_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">nbest_list</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">108</span><span class="n">nbest_list_1_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">nbest_list_1_dot</span><span class="p">)</span>
<span class="linenos">109</span><span class="n">nbest_list_1_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;lattice-3best-1.svg&quot;</span><span class="p">)</span>
<span class="linenos">110</span>
<span class="linenos">111</span><span class="n">nbest_list_2_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">nbest_list</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">112</span><span class="n">nbest_list_2_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">nbest_list_2_dot</span><span class="p">)</span>
<span class="linenos">113</span><span class="n">nbest_list_2_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;lattice-3best-2.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id107" style="width: 600px">
<img alt="lattice.svg" src="../_images/lattice2.svg" /><figcaption>
<p><span class="caption-number">Fig. 52 </span><span class="caption-text">Visualization of lattice.svg</span><a class="headerlink" href="#id107" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id108" style="width: 600px">
<img alt="lattice-3best-0.svg" src="../_images/lattice-3best-01.svg" /><figcaption>
<p><span class="caption-number">Fig. 53 </span><span class="caption-text">Visualization of lattice-3best-0.svg</span><a class="headerlink" href="#id108" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id109" style="width: 600px">
<img alt="lattice-3best-1.svg" src="../_images/lattice-3best-11.svg" /><figcaption>
<p><span class="caption-number">Fig. 54 </span><span class="caption-text">Visualization of lattice-3best-1.svg</span><a class="headerlink" href="#id109" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id110" style="width: 600px">
<img alt="lattice-3best-2.svg" src="../_images/lattice-3best-21.svg" /><figcaption>
<p><span class="caption-number">Fig. 55 </span><span class="caption-text">Visualization of lattice-3best-2.svg</span><a class="headerlink" href="#id110" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</dd></dl>

</section>
<section id="make-linear-acceptor">
<h2>make_linear_acceptor<a class="headerlink" href="#make-linear-acceptor" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.make_linear_acceptor">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">make_linear_acceptor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">labels</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_kaldifst.StdVectorFst</span></span></span><a class="headerlink" href="#kaldifst.make_linear_acceptor" title="Permalink to this definition"></a></dt>
<dd><p>Creates unweighted linear acceptor from symbol sequence.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>labels</strong> – A list of symbol IDs.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Return a linear acceptor. Actually, it returns a transducer whose
ilabel == olabel for each arc.</p>
</dd>
</dl>
<p><strong>Example 1: Build a linear acceptor</strong></p>
<div class="literal-block-wrapper docutils container" id="id111">
<div class="code-block-caption"><span class="caption-number">Listing 35 </span><span class="caption-text">Example of make_linear_acceptor()</span><a class="headerlink" href="#id111" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="n">sym1</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym1&quot;</span><span class="p">)</span>
<span class="linenos"> 7</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos"> 8</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;h&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos"> 9</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;l&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="linenos">10</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="linenos">11</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">make_linear_acceptor</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="n">fst</span><span class="o">.</span><span class="n">input_symbols</span> <span class="o">=</span> <span class="n">sym1</span>
<span class="linenos">16</span><span class="n">fst</span><span class="o">.</span><span class="n">output_symbols</span> <span class="o">=</span> <span class="n">sym1</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">19</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">20</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;acceptor.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id112" style="width: 600px">
<img alt="acceptor.svg" src="../_images/acceptor3.svg" /><figcaption>
<p><span class="caption-number">Fig. 56 </span><span class="caption-text">Visualization of acceptor.svg</span><a class="headerlink" href="#id112" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</dd></dl>

</section>
<section id="minimize">
<h2>minimize<a class="headerlink" href="#minimize" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.minimize">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">minimize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_out</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_kaldifst.StdMutableFst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1e-06</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_nondet</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kaldifst.minimize" title="Permalink to this definition"></a></dt>
<dd><p>This operation performs the minimization of deterministic weighted automata
and transducers.</p>
<p>See also <a class="reference external" href="https://www.openfst.org/twiki/bin/view/FST/MinimizeDoc">https://www.openfst.org/twiki/bin/view/FST/MinimizeDoc</a>.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The FST is modified in-place.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>in_out</strong> – An acceptor or a transducer. It is modified in-place.</p></li>
<li><p><strong>delta</strong> – Comparison/quantization delta</p></li>
<li><p><strong>allow_nondet</strong> – type = bool, default = false
True to minimize non-deterministic FSTs</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Return <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
<p><strong>Example 1: Minimize an acceptor</strong></p>
<div class="literal-block-wrapper docutils container" id="id113">
<div class="code-block-caption"><span class="caption-number">Listing 36 </span><span class="caption-text">Minimize an acceptor</span><a class="headerlink" href="#id113" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python3</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 8</span><span class="s2">0 1 a 2</span>
<span class="linenos"> 9</span><span class="s2">0 1 b 2</span>
<span class="linenos">10</span><span class="s2">0 1 c 3</span>
<span class="linenos">11</span><span class="s2">0 2 d 3</span>
<span class="linenos">12</span><span class="s2">0 2 f 1</span>
<span class="linenos">13</span><span class="s2">1 3 f 3</span>
<span class="linenos">14</span><span class="s2">1 3 g 2</span>
<span class="linenos">15</span><span class="s2">3 1</span>
<span class="linenos">16</span><span class="s2">2 4 f 5</span>
<span class="linenos">17</span><span class="s2">2 4 g 4</span>
<span class="linenos">18</span><span class="s2">4 3</span>
<span class="linenos">19</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="n">isym</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span>
<span class="linenos">22</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">23</span><span class="sd">        a 1</span>
<span class="linenos">24</span><span class="sd">        b 2</span>
<span class="linenos">25</span><span class="sd">        c 3</span>
<span class="linenos">26</span><span class="sd">        d 4</span>
<span class="linenos">27</span><span class="sd">        f 5</span>
<span class="linenos">28</span><span class="sd">        g 6</span>
<span class="linenos">29</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">30</span><span class="p">)</span>
<span class="linenos">31</span>
<span class="linenos">32</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
<span class="linenos">33</span>    <span class="n">s</span><span class="p">,</span>
<span class="linenos">34</span>    <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">35</span>    <span class="n">isymbols</span><span class="o">=</span><span class="n">isym</span><span class="p">,</span>
<span class="linenos">36</span>    <span class="n">keep_isymbols</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">37</span><span class="p">)</span>
<span class="linenos">38</span>
<span class="linenos">39</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">40</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">41</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;acceptor.svg&quot;</span><span class="p">)</span>
<span class="linenos">42</span>
<span class="linenos">43</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">minimize</span><span class="p">(</span><span class="n">fst</span><span class="p">)</span>
<span class="linenos">44</span>
<span class="linenos">45</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">46</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">47</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;acceptor-minimized.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id114" style="width: 600px">
<img alt="acceptor.svg" src="../_images/acceptor4.svg" /><figcaption>
<p><span class="caption-number">Fig. 57 </span><span class="caption-text">Visualization of acceptor.svg (before minimize)</span><a class="headerlink" href="#id114" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id115" style="width: 600px">
<img alt="acceptor-minimized.svg" src="../_images/acceptor-minimized.svg" /><figcaption>
<p><span class="caption-number">Fig. 58 </span><span class="caption-text">Visualization of acceptor-minimized.svg (after minimize)</span><a class="headerlink" href="#id115" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p><strong>Example 2: Minimize a transducer</strong></p>
<div class="literal-block-wrapper docutils container" id="id116">
<div class="code-block-caption"><span class="caption-number">Listing 37 </span><span class="caption-text">Minimize a transducer</span><a class="headerlink" href="#id116" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python3</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 8</span><span class="s2">0 1 a a 2</span>
<span class="linenos"> 9</span><span class="s2">0 1 b a 2</span>
<span class="linenos">10</span><span class="s2">0 1 c a 3</span>
<span class="linenos">11</span><span class="s2">0 2 d a 3</span>
<span class="linenos">12</span><span class="s2">0 2 f a 1</span>
<span class="linenos">13</span><span class="s2">1 3 f b 3</span>
<span class="linenos">14</span><span class="s2">1 3 g b 2</span>
<span class="linenos">15</span><span class="s2">3 1</span>
<span class="linenos">16</span><span class="s2">2 4 f c 5</span>
<span class="linenos">17</span><span class="s2">2 4 g c 4</span>
<span class="linenos">18</span><span class="s2">4 3</span>
<span class="linenos">19</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="n">isym</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span>
<span class="linenos">22</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">23</span><span class="sd">        a 1</span>
<span class="linenos">24</span><span class="sd">        b 2</span>
<span class="linenos">25</span><span class="sd">        c 3</span>
<span class="linenos">26</span><span class="sd">        d 4</span>
<span class="linenos">27</span><span class="sd">        f 5</span>
<span class="linenos">28</span><span class="sd">        g 6</span>
<span class="linenos">29</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">30</span><span class="p">)</span>
<span class="linenos">31</span>
<span class="linenos">32</span><span class="n">osym</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span>
<span class="linenos">33</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">34</span><span class="sd">        a 1</span>
<span class="linenos">35</span><span class="sd">        b 2</span>
<span class="linenos">36</span><span class="sd">        c 3</span>
<span class="linenos">37</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">38</span><span class="p">)</span>
<span class="linenos">39</span>
<span class="linenos">40</span>
<span class="linenos">41</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
<span class="linenos">42</span>    <span class="n">s</span><span class="p">,</span>
<span class="linenos">43</span>    <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">44</span>    <span class="n">isymbols</span><span class="o">=</span><span class="n">isym</span><span class="p">,</span>
<span class="linenos">45</span>    <span class="n">osymbols</span><span class="o">=</span><span class="n">osym</span><span class="p">,</span>
<span class="linenos">46</span>    <span class="n">keep_isymbols</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">47</span>    <span class="n">keep_osymbols</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">48</span><span class="p">)</span>
<span class="linenos">49</span>
<span class="linenos">50</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">51</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">52</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;transducer.svg&quot;</span><span class="p">)</span>
<span class="linenos">53</span>
<span class="linenos">54</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">minimize</span><span class="p">(</span><span class="n">fst</span><span class="p">)</span>
<span class="linenos">55</span>
<span class="linenos">56</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">57</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">58</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;transducer-minimized.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id117" style="width: 600px">
<img alt="transducer.svg" src="../_images/transducer4.svg" /><figcaption>
<p><span class="caption-number">Fig. 59 </span><span class="caption-text">Visualization of transducer.svg (before minimize)</span><a class="headerlink" href="#id117" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id118" style="width: 600px">
<img alt="transducer-minimized.svg" src="../_images/transducer-minimized.svg" /><figcaption>
<p><span class="caption-number">Fig. 60 </span><span class="caption-text">Visualization of transducer-minimized.svg (after minimize)</span><a class="headerlink" href="#id118" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</dd></dl>

</section>
<section id="minimize-encoded">
<h2>minimize_encoded<a class="headerlink" href="#minimize-encoded" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.minimize_encoded">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">minimize_encoded</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_out</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_kaldifst.StdMutableFst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0009765625</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kaldifst.minimize_encoded" title="Permalink to this definition"></a></dt>
<dd><p>Minimizes after encoding; applicable to all FSTs.</p>
<p>Its implementation is from <a class="reference external" href="https://github.com/kaldi-asr/kaldi">Kaldi</a>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Map</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span><span class="w"> </span><span class="n">QuantizeMapper</span><span class="o">&lt;</span><span class="n">Arc</span><span class="o">&gt;</span><span class="p">(</span><span class="n">delta</span><span class="p">));</span>
<span class="n">EncodeMapper</span><span class="o">&lt;</span><span class="n">Arc</span><span class="o">&gt;</span><span class="w"> </span><span class="n">encoder</span><span class="p">(</span><span class="n">kEncodeLabels</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">kEncodeWeights</span><span class="p">,</span><span class="w"> </span><span class="n">ENCODE</span><span class="p">);</span>
<span class="n">Encode</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">encoder</span><span class="p">);</span>
<span class="n">internal</span><span class="o">::</span><span class="n">AcceptorMinimize</span><span class="p">(</span><span class="n">fst</span><span class="p">);</span>
<span class="n">Decode</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span><span class="w"> </span><span class="n">encoder</span><span class="p">);</span>
</pre></div>
</div>
<p>See also <a class="reference external" href="https://github.com/kaldi-asr/kaldi/blob/master/src/fstbin/fstminimizeencoded.cc">https://github.com/kaldi-asr/kaldi/blob/master/src/fstbin/fstminimizeencoded.cc</a>.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The FST is modified in-place.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>in_out</strong> – An acceptor or a transducer. It is modified in-place.</p></li>
<li><p><strong>delta</strong> – Comparison/quantization delta</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Return <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
<p><strong>Example 1: Minimize encode an acceptor</strong></p>
<div class="literal-block-wrapper docutils container" id="id119">
<div class="code-block-caption"><span class="caption-number">Listing 38 </span><span class="caption-text">Minimize encode an acceptor</span><a class="headerlink" href="#id119" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python3</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 8</span><span class="s2">0 1 a 2</span>
<span class="linenos"> 9</span><span class="s2">0 1 b 2</span>
<span class="linenos">10</span><span class="s2">0 1 c 3</span>
<span class="linenos">11</span><span class="s2">0 2 d 3</span>
<span class="linenos">12</span><span class="s2">0 2 f 1</span>
<span class="linenos">13</span><span class="s2">1 3 f 3</span>
<span class="linenos">14</span><span class="s2">1 3 g 2</span>
<span class="linenos">15</span><span class="s2">3 1</span>
<span class="linenos">16</span><span class="s2">2 4 f 5</span>
<span class="linenos">17</span><span class="s2">2 4 g 4</span>
<span class="linenos">18</span><span class="s2">4 3</span>
<span class="linenos">19</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="n">isym</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span>
<span class="linenos">22</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">23</span><span class="sd">        a 1</span>
<span class="linenos">24</span><span class="sd">        b 2</span>
<span class="linenos">25</span><span class="sd">        c 3</span>
<span class="linenos">26</span><span class="sd">        d 4</span>
<span class="linenos">27</span><span class="sd">        f 5</span>
<span class="linenos">28</span><span class="sd">        g 6</span>
<span class="linenos">29</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">30</span><span class="p">)</span>
<span class="linenos">31</span>
<span class="linenos">32</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
<span class="linenos">33</span>    <span class="n">s</span><span class="p">,</span>
<span class="linenos">34</span>    <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">35</span>    <span class="n">isymbols</span><span class="o">=</span><span class="n">isym</span><span class="p">,</span>
<span class="linenos">36</span>    <span class="n">keep_isymbols</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">37</span><span class="p">)</span>
<span class="linenos">38</span>
<span class="linenos">39</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">40</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">41</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;acceptor.svg&quot;</span><span class="p">)</span>
<span class="linenos">42</span>
<span class="linenos">43</span><span class="n">fst</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;acceptor.fst&quot;</span><span class="p">)</span>
<span class="linenos">44</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">minimize_encoded</span><span class="p">(</span><span class="n">fst</span><span class="p">)</span>
<span class="linenos">45</span>
<span class="linenos">46</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">47</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">48</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;acceptor-minimize-encoded.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id120" style="width: 600px">
<img alt="acceptor.svg" src="../_images/acceptor5.svg" /><figcaption>
<p><span class="caption-number">Fig. 61 </span><span class="caption-text">Visualization of acceptor.svg (before minimize_encoded)</span><a class="headerlink" href="#id120" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id121" style="width: 600px">
<img alt="acceptor-minimize-encoded.svg" src="../_images/acceptor-minimize-encoded.svg" /><figcaption>
<p><span class="caption-number">Fig. 62 </span><span class="caption-text">Visualization of acceptor-minimize-encoded.svg (after minimize_encoded)</span><a class="headerlink" href="#id121" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p><strong>Example 2: Minimize encode a transducer</strong></p>
<div class="literal-block-wrapper docutils container" id="id122">
<div class="code-block-caption"><span class="caption-number">Listing 39 </span><span class="caption-text">Minimize encode a transducer</span><a class="headerlink" href="#id122" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python3</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 8</span><span class="s2">0 1 a a 2</span>
<span class="linenos"> 9</span><span class="s2">0 1 b a 2</span>
<span class="linenos">10</span><span class="s2">0 1 c a 3</span>
<span class="linenos">11</span><span class="s2">0 2 d a 3</span>
<span class="linenos">12</span><span class="s2">0 2 f a 1</span>
<span class="linenos">13</span><span class="s2">1 3 f b 3</span>
<span class="linenos">14</span><span class="s2">1 3 g b 2</span>
<span class="linenos">15</span><span class="s2">3 1</span>
<span class="linenos">16</span><span class="s2">2 4 f c 5</span>
<span class="linenos">17</span><span class="s2">2 4 g c 4</span>
<span class="linenos">18</span><span class="s2">4 3</span>
<span class="linenos">19</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="n">isym</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span>
<span class="linenos">22</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">23</span><span class="sd">        a 1</span>
<span class="linenos">24</span><span class="sd">        b 2</span>
<span class="linenos">25</span><span class="sd">        c 3</span>
<span class="linenos">26</span><span class="sd">        d 4</span>
<span class="linenos">27</span><span class="sd">        f 5</span>
<span class="linenos">28</span><span class="sd">        g 6</span>
<span class="linenos">29</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">30</span><span class="p">)</span>
<span class="linenos">31</span>
<span class="linenos">32</span><span class="n">osym</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span>
<span class="linenos">33</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">34</span><span class="sd">        a 1</span>
<span class="linenos">35</span><span class="sd">        b 2</span>
<span class="linenos">36</span><span class="sd">        c 3</span>
<span class="linenos">37</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">38</span><span class="p">)</span>
<span class="linenos">39</span>
<span class="linenos">40</span>
<span class="linenos">41</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
<span class="linenos">42</span>    <span class="n">s</span><span class="p">,</span>
<span class="linenos">43</span>    <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">44</span>    <span class="n">isymbols</span><span class="o">=</span><span class="n">isym</span><span class="p">,</span>
<span class="linenos">45</span>    <span class="n">osymbols</span><span class="o">=</span><span class="n">osym</span><span class="p">,</span>
<span class="linenos">46</span>    <span class="n">keep_isymbols</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">47</span>    <span class="n">keep_osymbols</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">48</span><span class="p">)</span>
<span class="linenos">49</span>
<span class="linenos">50</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">51</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">52</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;transducer.svg&quot;</span><span class="p">)</span>
<span class="linenos">53</span>
<span class="linenos">54</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">minimize_encoded</span><span class="p">(</span><span class="n">fst</span><span class="p">)</span>
<span class="linenos">55</span>
<span class="linenos">56</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">57</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">58</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;transducer-minimize-encoded.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id123" style="width: 600px">
<img alt="transducer.svg" src="../_images/transducer5.svg" /><figcaption>
<p><span class="caption-number">Fig. 63 </span><span class="caption-text">Visualization of transducer.svg (before minimize_encoded)</span><a class="headerlink" href="#id123" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id124" style="width: 600px">
<img alt="transducer-minimize-encoded.svg" src="../_images/transducer-minimize-encoded.svg" /><figcaption>
<p><span class="caption-number">Fig. 64 </span><span class="caption-text">Visualization of transducer-minimize-encoded.svg (after minimize encoded)</span><a class="headerlink" href="#id124" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</dd></dl>

</section>
<section id="plus">
<h2>plus<a class="headerlink" href="#plus" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.plus">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">plus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kaldifst.plus" title="Permalink to this definition"></a></dt>
<dd><p>Overloaded function.</p>
<ol class="arabic simple">
<li><p>plus(arg0: _kaldifst.TropicalWeight, arg1: _kaldifst.TropicalWeight) -&gt; _kaldifst.TropicalWeight</p></li>
<li><p>plus(arg0: _kaldifst.LatticeWeight, arg1: _kaldifst.LatticeWeight) -&gt; _kaldifst.LatticeWeight</p></li>
</ol>
</dd></dl>

</section>
<section id="reverse">
<h2>reverse<a class="headerlink" href="#reverse" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.reverse">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">reverse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ifst</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_kaldifst.StdFst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">require_superinitial</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_kaldifst.StdVectorFst</span></span></span><a class="headerlink" href="#kaldifst.reverse" title="Permalink to this definition"></a></dt>
<dd><p>This operation reverses an FST. If A transduces string x to y with weight a,
then the reverse of A transduces the reverse of x to the reverse of y
with weight a.Reverse().</p>
<p>See also <a class="reference external" href="https://www.openfst.org/twiki/bin/view/FST/ReverseDoc">https://www.openfst.org/twiki/bin/view/FST/ReverseDoc</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ifst</strong> – The input FST.</p></li>
<li><p><strong>require_superinitial</strong> – True to create a superinitial state.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Return the reversed FST.</p>
</dd>
</dl>
<p><strong>Example 1 Revert an acceptor (require_superinitial=True)</strong></p>
<div class="literal-block-wrapper docutils container" id="id125">
<div class="code-block-caption"><span class="caption-number">Listing 40 </span><span class="caption-text">Revert an acceptor using require_superinitial=True</span><a class="headerlink" href="#id125" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python3</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 8</span><span class="s2">0 0 a 2</span>
<span class="linenos"> 9</span><span class="s2">0 1 a 1</span>
<span class="linenos">10</span><span class="s2">1 3</span>
<span class="linenos">11</span><span class="s2">1 2 b 3</span>
<span class="linenos">12</span><span class="s2">1 2 b 4</span>
<span class="linenos">13</span><span class="s2">2 2 d 5</span>
<span class="linenos">14</span><span class="s2">2 3 d 6</span>
<span class="linenos">15</span><span class="s2">3 3 f 2</span>
<span class="linenos">16</span><span class="s2">3 2</span>
<span class="linenos">17</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">18</span><span class="n">isym</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span>
<span class="linenos">19</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">20</span><span class="sd">        eps 0</span>
<span class="linenos">21</span><span class="sd">        a 1</span>
<span class="linenos">22</span><span class="sd">        b 2</span>
<span class="linenos">23</span><span class="sd">        c 3</span>
<span class="linenos">24</span><span class="sd">        d 4</span>
<span class="linenos">25</span><span class="sd">        f 5</span>
<span class="linenos">26</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">27</span><span class="p">)</span>
<span class="linenos">28</span>
<span class="linenos">29</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
<span class="linenos">30</span>    <span class="n">s</span><span class="p">,</span>
<span class="linenos">31</span>    <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">32</span>    <span class="n">isymbols</span><span class="o">=</span><span class="n">isym</span><span class="p">,</span>
<span class="linenos">33</span>    <span class="n">keep_isymbols</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">34</span><span class="p">)</span>
<span class="linenos">35</span>
<span class="linenos">36</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">37</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">38</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;acceptor-before-reverse.svg&quot;</span><span class="p">)</span>
<span class="linenos">39</span>
<span class="linenos">40</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">reverse</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">require_superinitial</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">41</span>
<span class="linenos">42</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">43</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">44</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;acceptor-after-reverse.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id126" style="width: 600px">
<img alt="acceptor-before-reverse.svg" src="../_images/acceptor-before-reverse.svg" /><figcaption>
<p><span class="caption-number">Fig. 65 </span><span class="caption-text">Visualization of acceptor-before-reverse.svg</span><a class="headerlink" href="#id126" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id127" style="width: 600px">
<img alt="acceptor-after-reverse.svg" src="../_images/acceptor-after-reverse.svg" /><figcaption>
<p><span class="caption-number">Fig. 66 </span><span class="caption-text">Visualization of acceptor-after-reverse.svg using <code class="docutils literal notranslate"><span class="pre">require_superinitial=True</span></code></span><a class="headerlink" href="#id127" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p><strong>Example 2 Revert an acceptor (require_superinitial=False)</strong></p>
<div class="literal-block-wrapper docutils container" id="id128">
<div class="code-block-caption"><span class="caption-number">Listing 41 </span><span class="caption-text">Revert an acceptor using require_superinitial=False</span><a class="headerlink" href="#id128" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python3</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 8</span><span class="s2">0 0 a 2</span>
<span class="linenos"> 9</span><span class="s2">0 1 a 1</span>
<span class="linenos">10</span><span class="s2">1 3</span>
<span class="linenos">11</span><span class="s2">1 2 b 3</span>
<span class="linenos">12</span><span class="s2">1 2 b 4</span>
<span class="linenos">13</span><span class="s2">2 2 d 5</span>
<span class="linenos">14</span><span class="s2">2 3 d 6</span>
<span class="linenos">15</span><span class="s2">3 3 f 2</span>
<span class="linenos">16</span><span class="s2">3 2</span>
<span class="linenos">17</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">18</span><span class="n">isym</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span>
<span class="linenos">19</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">20</span><span class="sd">        eps 0</span>
<span class="linenos">21</span><span class="sd">        a 1</span>
<span class="linenos">22</span><span class="sd">        b 2</span>
<span class="linenos">23</span><span class="sd">        c 3</span>
<span class="linenos">24</span><span class="sd">        d 4</span>
<span class="linenos">25</span><span class="sd">        f 5</span>
<span class="linenos">26</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">27</span><span class="p">)</span>
<span class="linenos">28</span>
<span class="linenos">29</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
<span class="linenos">30</span>    <span class="n">s</span><span class="p">,</span>
<span class="linenos">31</span>    <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">32</span>    <span class="n">isymbols</span><span class="o">=</span><span class="n">isym</span><span class="p">,</span>
<span class="linenos">33</span>    <span class="n">keep_isymbols</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">34</span><span class="p">)</span>
<span class="linenos">35</span>
<span class="linenos">36</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">37</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">38</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;acceptor-before-reverse-2.svg&quot;</span><span class="p">)</span>
<span class="linenos">39</span>
<span class="linenos">40</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">reverse</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">require_superinitial</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="linenos">41</span>
<span class="linenos">42</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">43</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">44</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;acceptor-after-reverse-2.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id129" style="width: 600px">
<img alt="acceptor-before-reverse-2.svg" src="../_images/acceptor-before-reverse-2.svg" /><figcaption>
<p><span class="caption-number">Fig. 67 </span><span class="caption-text">Visualization of acceptor-before-reverse-2.svg</span><a class="headerlink" href="#id129" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id130" style="width: 600px">
<img alt="acceptor-after-reverse-2.svg" src="../_images/acceptor-after-reverse-2.svg" /><figcaption>
<p><span class="caption-number">Fig. 68 </span><span class="caption-text">Visualization of acceptor-after-reverse-2.svg using <code class="docutils literal notranslate"><span class="pre">require_superinitial=False</span></code></span><a class="headerlink" href="#id130" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p><strong>Example 3 Revert a transducer  (require_superinitial=False)</strong></p>
<div class="literal-block-wrapper docutils container" id="id131">
<div class="code-block-caption"><span class="caption-number">Listing 42 </span><span class="caption-text">Revert a transducer using require_superinitial=True</span><a class="headerlink" href="#id131" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python3</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 8</span><span class="s2">0 1 a a</span>
<span class="linenos"> 9</span><span class="s2">1 2 b b</span>
<span class="linenos">10</span><span class="s2">1 3 c c</span>
<span class="linenos">11</span><span class="s2">2 4 eps eps</span>
<span class="linenos">12</span><span class="s2">3 4 eps eps</span>
<span class="linenos">13</span><span class="s2">4</span>
<span class="linenos">14</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">15</span><span class="n">isym</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span>
<span class="linenos">16</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">17</span><span class="sd">        eps 0</span>
<span class="linenos">18</span><span class="sd">        a 1</span>
<span class="linenos">19</span><span class="sd">        b 2</span>
<span class="linenos">20</span><span class="sd">        c 3</span>
<span class="linenos">21</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">22</span><span class="p">)</span>
<span class="linenos">23</span>
<span class="linenos">24</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
<span class="linenos">25</span>    <span class="n">s</span><span class="p">,</span>
<span class="linenos">26</span>    <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">27</span>    <span class="n">isymbols</span><span class="o">=</span><span class="n">isym</span><span class="p">,</span>
<span class="linenos">28</span>    <span class="n">osymbols</span><span class="o">=</span><span class="n">isym</span><span class="p">,</span>
<span class="linenos">29</span>    <span class="n">keep_isymbols</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">30</span>    <span class="n">keep_osymbols</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">31</span><span class="p">)</span>
<span class="linenos">32</span>
<span class="linenos">33</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">34</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">35</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;transducer-before-reverse.svg&quot;</span><span class="p">)</span>
<span class="linenos">36</span>
<span class="linenos">37</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">reverse</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">require_superinitial</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">38</span>
<span class="linenos">39</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">40</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">41</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;transducer-after-reverse.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id132" style="width: 600px">
<img alt="transducer-before-reverse.svg" src="../_images/transducer-before-reverse.svg" /><figcaption>
<p><span class="caption-number">Fig. 69 </span><span class="caption-text">Visualization of transducer-before-reverse.svg</span><a class="headerlink" href="#id132" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id133" style="width: 600px">
<img alt="transducer-after-reverse.svg" src="../_images/transducer-after-reverse.svg" /><figcaption>
<p><span class="caption-number">Fig. 70 </span><span class="caption-text">Visualization of transducer-after-reverse.svg using <code class="docutils literal notranslate"><span class="pre">require_superinitial=True</span></code></span><a class="headerlink" href="#id133" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p><strong>Example 4 Revert a transducer (require_superinitial=False)</strong></p>
<div class="literal-block-wrapper docutils container" id="id134">
<div class="code-block-caption"><span class="caption-number">Listing 43 </span><span class="caption-text">Revert a transducer using require_superinitial=False</span><a class="headerlink" href="#id134" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python3</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 8</span><span class="s2">0 1 a a</span>
<span class="linenos"> 9</span><span class="s2">1 2 b b</span>
<span class="linenos">10</span><span class="s2">1 3 c c</span>
<span class="linenos">11</span><span class="s2">2 4 eps eps</span>
<span class="linenos">12</span><span class="s2">3 4 eps eps</span>
<span class="linenos">13</span><span class="s2">4</span>
<span class="linenos">14</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">15</span><span class="n">isym</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span>
<span class="linenos">16</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">17</span><span class="sd">        eps 0</span>
<span class="linenos">18</span><span class="sd">        a 1</span>
<span class="linenos">19</span><span class="sd">        b 2</span>
<span class="linenos">20</span><span class="sd">        c 3</span>
<span class="linenos">21</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">22</span><span class="p">)</span>
<span class="linenos">23</span>
<span class="linenos">24</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
<span class="linenos">25</span>    <span class="n">s</span><span class="p">,</span>
<span class="linenos">26</span>    <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">27</span>    <span class="n">isymbols</span><span class="o">=</span><span class="n">isym</span><span class="p">,</span>
<span class="linenos">28</span>    <span class="n">osymbols</span><span class="o">=</span><span class="n">isym</span><span class="p">,</span>
<span class="linenos">29</span>    <span class="n">keep_isymbols</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">30</span>    <span class="n">keep_osymbols</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">31</span><span class="p">)</span>
<span class="linenos">32</span>
<span class="linenos">33</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">34</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">35</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;transducer-before-reverse-2.svg&quot;</span><span class="p">)</span>
<span class="linenos">36</span>
<span class="linenos">37</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">reverse</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">require_superinitial</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="linenos">38</span>
<span class="linenos">39</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">40</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">41</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;transducer-after-reverse-2.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id135" style="width: 600px">
<img alt="transducer-before-reverse-2.svg" src="../_images/transducer-before-reverse-2.svg" /><figcaption>
<p><span class="caption-number">Fig. 71 </span><span class="caption-text">Visualization of transducer-before-reverse-2.svg</span><a class="headerlink" href="#id135" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id136" style="width: 600px">
<img alt="transducer-after-reverse-2.svg" src="../_images/transducer-after-reverse-2.svg" /><figcaption>
<p><span class="caption-number">Fig. 72 </span><span class="caption-text">Visualization of transducer-after-reverse-2.svg using <code class="docutils literal notranslate"><span class="pre">require_superinitial=False</span></code></span><a class="headerlink" href="#id136" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</dd></dl>

</section>
<section id="rmepsilon">
<h2>rmepsilon<a class="headerlink" href="#rmepsilon" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.rmepsilon">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">rmepsilon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_out</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_kaldifst.StdMutableFst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1e-06</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nstate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">queue_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kaldifst.rmepsilon" title="Permalink to this definition"></a></dt>
<dd><p>This operation removes epsilon-transitions (when both the input and output
label are an epsilon) from a transducer. The result will be an equivalent FST
that has no such epsilon transitions.</p>
<p>See also <a class="reference external" href="https://www.openfst.org/twiki/bin/view/FST/RmEpsilonDoc">https://www.openfst.org/twiki/bin/view/FST/RmEpsilonDoc</a></p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The FST is modified in-place.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>in_out</strong> – An FST. It is modified in-place.</p></li>
<li><p><strong>connect</strong> – Trim output</p></li>
<li><p><strong>delta</strong> – Comparison/quantization delta</p></li>
<li><p><strong>nstate</strong> – State number threshold</p></li>
<li><p><strong>queue_type</strong> – Queue type: one of: “auto”, “fifo”, “lifo”, “shortest”, “state”, “top”</p></li>
<li><p><strong>weight</strong> – Weight threshold</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Return <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
<p><strong>Example Remove epsilon of a transducer</strong></p>
<div class="literal-block-wrapper docutils container" id="id137">
<div class="code-block-caption"><span class="caption-number">Listing 44 </span><span class="caption-text">Remove epsilon of transducer</span><a class="headerlink" href="#id137" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python3</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="n">s</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 8</span><span class="s2">0 1 eps eps 1</span>
<span class="linenos"> 9</span><span class="s2">1 2 a eps 2</span>
<span class="linenos">10</span><span class="s2">1 2 eps p 3</span>
<span class="linenos">11</span><span class="s2">1 2 eps eps 4</span>
<span class="linenos">12</span><span class="s2">2 2 eps eps 5</span>
<span class="linenos">13</span><span class="s2">2 3 eps eps 6</span>
<span class="linenos">14</span><span class="s2">3 7</span>
<span class="linenos">15</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">16</span><span class="n">isym</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span>
<span class="linenos">17</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">18</span><span class="sd">        eps 0</span>
<span class="linenos">19</span><span class="sd">        a 1</span>
<span class="linenos">20</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">21</span><span class="p">)</span>
<span class="linenos">22</span>
<span class="linenos">23</span><span class="n">osym</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span>
<span class="linenos">24</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">25</span><span class="sd">        eps 0</span>
<span class="linenos">26</span><span class="sd">        p 1</span>
<span class="linenos">27</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">28</span><span class="p">)</span>
<span class="linenos">29</span>
<span class="linenos">30</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
<span class="linenos">31</span>    <span class="n">s</span><span class="p">,</span>
<span class="linenos">32</span>    <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">33</span>    <span class="n">isymbols</span><span class="o">=</span><span class="n">isym</span><span class="p">,</span>
<span class="linenos">34</span>    <span class="n">osymbols</span><span class="o">=</span><span class="n">osym</span><span class="p">,</span>
<span class="linenos">35</span>    <span class="n">keep_isymbols</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">36</span>    <span class="n">keep_osymbols</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">37</span><span class="p">)</span>
<span class="linenos">38</span>
<span class="linenos">39</span>
<span class="linenos">40</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">41</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">42</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;transducer.svg&quot;</span><span class="p">)</span>
<span class="linenos">43</span>
<span class="linenos">44</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">rmepsilon</span><span class="p">(</span><span class="n">fst</span><span class="p">)</span>
<span class="linenos">45</span>
<span class="linenos">46</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">47</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">48</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;transducer-after-rmepsilon.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id138" style="width: 600px">
<img alt="transducer.svg" src="../_images/transducer6.svg" /><figcaption>
<p><span class="caption-number">Fig. 73 </span><span class="caption-text">Visualization of transducer.svg</span><a class="headerlink" href="#id138" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id139" style="width: 600px">
<img alt="transducer-after-rmepislon.svg" src="../_images/transducer-after-rmepsilon.svg" /><figcaption>
<p><span class="caption-number">Fig. 74 </span><span class="caption-text">Visualization of transducer-after-rmepsilon.svg</span><a class="headerlink" href="#id139" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</dd></dl>

</section>
<section id="scale-lattice">
<h2>scale_lattice<a class="headerlink" href="#scale-lattice" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.scale_lattice">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">scale_lattice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_out</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_kaldifst.LatticeMutableFst</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#kaldifst.scale_lattice" title="Permalink to this definition"></a></dt>
<dd><p>Scales the pairs of weights in <code class="docutils literal notranslate"><span class="pre">LatticeWeight</span></code> by
viewing the pair <code class="docutils literal notranslate"><span class="pre">(a,</span> <span class="pre">b)</span></code> as a 2-vector and pre-multiplying by
the 2x2 matrix in “scale”.  E.g. typically scale would equal</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="w"> </span><span class="m">1</span><span class="w">   </span><span class="m">0</span><span class="p">;</span>
<span class="w">  </span><span class="m">0</span><span class="w">  </span>acwt<span class="w"> </span><span class="o">]</span>
</pre></div>
</div>
<p>if we want to scale the acoustics by <code class="docutils literal notranslate"><span class="pre">acwt</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li><p>out_value1 = scale[0][0]*in_value1 + scale[0][1]*in_value2</p></li>
<li><p>out_value2 = scale[1][0]*in_value1 + scale[1][1]*in_value2</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scale</strong> – A list-of-list containing the weight</p></li>
<li><p><strong>in_out</strong> – The lattice is changed in-place.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Return <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
</dl>
<p>Example 1: Use a diagonal scale <code class="docutils literal notranslate"><span class="pre">[[0.1,</span> <span class="pre">0],</span> <span class="pre">[0,</span> <span class="pre">10]]</span></code></p>
<div class="literal-block-wrapper docutils container" id="id140">
<div class="code-block-caption"><span class="caption-number">Listing 45 </span><span class="caption-text">Scale a lattice.</span><a class="headerlink" href="#id140" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python3</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">Lattice</span><span class="p">()</span>
<span class="linenos"> 9</span><span class="n">s0</span> <span class="o">=</span> <span class="n">fst</span><span class="o">.</span><span class="n">add_state</span><span class="p">()</span>
<span class="linenos">10</span><span class="n">s1</span> <span class="o">=</span> <span class="n">fst</span><span class="o">.</span><span class="n">add_state</span><span class="p">()</span>
<span class="linenos">11</span><span class="n">s2</span> <span class="o">=</span> <span class="n">fst</span><span class="o">.</span><span class="n">add_state</span><span class="p">()</span>
<span class="linenos">12</span><span class="n">s3</span> <span class="o">=</span> <span class="n">fst</span><span class="o">.</span><span class="n">add_state</span><span class="p">()</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="n">fst</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">s0</span>
<span class="linenos">15</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos">16</span>    <span class="n">state</span><span class="o">=</span><span class="n">s0</span><span class="p">,</span>
<span class="linenos">17</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos">18</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="linenos">19</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="linenos">20</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.2</span><span class="p">),</span>
<span class="linenos">21</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span>
<span class="linenos">22</span>    <span class="p">),</span>
<span class="linenos">23</span><span class="p">)</span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos">26</span>    <span class="n">state</span><span class="o">=</span><span class="n">s0</span><span class="p">,</span>
<span class="linenos">27</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos">28</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos">29</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="linenos">30</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.4</span><span class="p">),</span>
<span class="linenos">31</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s2</span><span class="p">,</span>
<span class="linenos">32</span>    <span class="p">),</span>
<span class="linenos">33</span><span class="p">)</span>
<span class="linenos">34</span>
<span class="linenos">35</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos">36</span>    <span class="n">state</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span>
<span class="linenos">37</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos">38</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
<span class="linenos">39</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
<span class="linenos">40</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.6</span><span class="p">),</span>
<span class="linenos">41</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s3</span><span class="p">,</span>
<span class="linenos">42</span>    <span class="p">),</span>
<span class="linenos">43</span><span class="p">)</span>
<span class="linenos">44</span>
<span class="linenos">45</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos">46</span>    <span class="n">state</span><span class="o">=</span><span class="n">s2</span><span class="p">,</span>
<span class="linenos">47</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos">48</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
<span class="linenos">49</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
<span class="linenos">50</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.8</span><span class="p">),</span>
<span class="linenos">51</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s3</span><span class="p">,</span>
<span class="linenos">52</span>    <span class="p">),</span>
<span class="linenos">53</span><span class="p">)</span>
<span class="linenos">54</span>
<span class="linenos">55</span><span class="n">fst</span><span class="o">.</span><span class="n">set_final</span><span class="p">(</span>
<span class="linenos">56</span>    <span class="n">state</span><span class="o">=</span><span class="n">s3</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="linenos">57</span><span class="p">)</span>
<span class="linenos">58</span>
<span class="linenos">59</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">60</span><span class="n">source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">61</span><span class="n">source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;before-scale.svg&quot;</span><span class="p">)</span>
<span class="linenos">62</span>
<span class="linenos">63</span><span class="n">scale</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">lattice_scale</span><span class="p">(</span><span class="n">lmwt</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">acwt</span><span class="o">=</span><span class="mf">10.0</span><span class="p">)</span>
<span class="linenos">64</span>
<span class="linenos">65</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">scale_lattice</span><span class="p">(</span><span class="n">scale</span><span class="p">,</span> <span class="n">fst</span><span class="p">)</span>
<span class="linenos">66</span>
<span class="linenos">67</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">68</span><span class="n">source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">69</span><span class="n">source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;after-scale.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id141" style="width: 600px">
<img alt="before-scale.svg" src="../_images/before-scale.svg" /><figcaption>
<p><span class="caption-number">Fig. 75 </span><span class="caption-text">Before scale.</span><a class="headerlink" href="#id141" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id142" style="width: 600px">
<img alt="after-scale.svg" src="../_images/after-scale.svg" /><figcaption>
<p><span class="caption-number">Fig. 76 </span><span class="caption-text">After scale using <code class="docutils literal notranslate"><span class="pre">[[0.1,</span> <span class="pre">0],</span> <span class="pre">[0,</span> <span class="pre">10]]</span></code>.</span><a class="headerlink" href="#id142" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Example 2: Use a non-diagonal scale <code class="docutils literal notranslate"><span class="pre">[[0.1,</span> <span class="pre">1],</span> <span class="pre">[0.5,</span> <span class="pre">10]]</span></code></p>
<div class="literal-block-wrapper docutils container" id="id143">
<div class="code-block-caption"><span class="caption-number">Listing 46 </span><span class="caption-text">Scale a lattice.</span><a class="headerlink" href="#id143" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python3</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">Lattice</span><span class="p">()</span>
<span class="linenos"> 9</span><span class="n">s0</span> <span class="o">=</span> <span class="n">fst</span><span class="o">.</span><span class="n">add_state</span><span class="p">()</span>
<span class="linenos">10</span><span class="n">s1</span> <span class="o">=</span> <span class="n">fst</span><span class="o">.</span><span class="n">add_state</span><span class="p">()</span>
<span class="linenos">11</span><span class="n">s2</span> <span class="o">=</span> <span class="n">fst</span><span class="o">.</span><span class="n">add_state</span><span class="p">()</span>
<span class="linenos">12</span><span class="n">s3</span> <span class="o">=</span> <span class="n">fst</span><span class="o">.</span><span class="n">add_state</span><span class="p">()</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="n">fst</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">s0</span>
<span class="linenos">15</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos">16</span>    <span class="n">state</span><span class="o">=</span><span class="n">s0</span><span class="p">,</span>
<span class="linenos">17</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos">18</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="linenos">19</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="linenos">20</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.2</span><span class="p">),</span>
<span class="linenos">21</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span>
<span class="linenos">22</span>    <span class="p">),</span>
<span class="linenos">23</span><span class="p">)</span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos">26</span>    <span class="n">state</span><span class="o">=</span><span class="n">s0</span><span class="p">,</span>
<span class="linenos">27</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos">28</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos">29</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="linenos">30</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.4</span><span class="p">),</span>
<span class="linenos">31</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s2</span><span class="p">,</span>
<span class="linenos">32</span>    <span class="p">),</span>
<span class="linenos">33</span><span class="p">)</span>
<span class="linenos">34</span>
<span class="linenos">35</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos">36</span>    <span class="n">state</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span>
<span class="linenos">37</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos">38</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
<span class="linenos">39</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
<span class="linenos">40</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.6</span><span class="p">),</span>
<span class="linenos">41</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s3</span><span class="p">,</span>
<span class="linenos">42</span>    <span class="p">),</span>
<span class="linenos">43</span><span class="p">)</span>
<span class="linenos">44</span>
<span class="linenos">45</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos">46</span>    <span class="n">state</span><span class="o">=</span><span class="n">s2</span><span class="p">,</span>
<span class="linenos">47</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos">48</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
<span class="linenos">49</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
<span class="linenos">50</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.8</span><span class="p">),</span>
<span class="linenos">51</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s3</span><span class="p">,</span>
<span class="linenos">52</span>    <span class="p">),</span>
<span class="linenos">53</span><span class="p">)</span>
<span class="linenos">54</span>
<span class="linenos">55</span><span class="n">fst</span><span class="o">.</span><span class="n">set_final</span><span class="p">(</span>
<span class="linenos">56</span>    <span class="n">state</span><span class="o">=</span><span class="n">s3</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="linenos">57</span><span class="p">)</span>
<span class="linenos">58</span>
<span class="linenos">59</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">60</span><span class="n">source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">61</span><span class="n">source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;before-scale-2.svg&quot;</span><span class="p">)</span>
<span class="linenos">62</span>
<span class="linenos">63</span><span class="n">scale</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">10</span><span class="p">]]</span>
<span class="linenos">64</span>
<span class="linenos">65</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">scale_lattice</span><span class="p">(</span><span class="n">scale</span><span class="p">,</span> <span class="n">fst</span><span class="p">)</span>
<span class="linenos">66</span>
<span class="linenos">67</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">68</span><span class="n">source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos">69</span><span class="n">source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;after-scale-2.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id144" style="width: 600px">
<img alt="before-scale-2.svg" src="../_images/before-scale-2.svg" /><figcaption>
<p><span class="caption-number">Fig. 77 </span><span class="caption-text">Before scale.</span><a class="headerlink" href="#id144" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id145" style="width: 600px">
<img alt="after-scale-2.svg" src="../_images/after-scale-2.svg" /><figcaption>
<p><span class="caption-number">Fig. 78 </span><span class="caption-text">After scale using <code class="docutils literal notranslate"><span class="pre">[[0.1,</span> <span class="pre">1],</span> <span class="pre">[0.5,</span> <span class="pre">10]]</span></code>.</span><a class="headerlink" href="#id145" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</dd></dl>

</section>
<section id="shortest-path">
<h2>shortest_path<a class="headerlink" href="#shortest-path" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.shortest_path">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">shortest_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kaldifst.shortest_path" title="Permalink to this definition"></a></dt>
<dd><p>Overloaded function.</p>
<ol class="arabic simple">
<li><p>shortest_path(fst: _kaldifst.StdFst, n: int = 1) -&gt; _kaldifst.StdVectorFst</p></li>
</ol>
<p>This operation produces an FST containing the n-shortest paths in the input FST.</p>
<p>The n -shortest paths are the n -lowest weight paths w.r.t. the natural semiring
order. The single path that can be read from the ith of at most n transitions
leaving the initial state of the resulting FST is the ith shortest path.</p>
<p>See also <a class="reference external" href="https://www.openfst.org/twiki/bin/view/FST/ShortestPathDoc">https://www.openfst.org/twiki/bin/view/FST/ShortestPathDoc</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> – Size of n-best.</p></li>
<li><p><strong>unique</strong> – Return only distinct strings. (NB: must be acceptor; epsilons
treated as regular symbols)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Return a VectorFst containing n linear paths.</p>
</dd>
</dl>
<p><strong>Example: shortest_path of a StdVectorFst</strong></p>
<div class="literal-block-wrapper docutils container" id="id146">
<div class="code-block-caption"><span class="caption-number">Listing 47 </span><span class="caption-text">ShortestPath for a StdVectorFst</span><a class="headerlink" href="#id146" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python3</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="n">s1</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="linenos"> 8</span><span class="s2">0 1 a 0.1</span>
<span class="linenos"> 9</span><span class="s2">0 2 b 0.1</span>
<span class="linenos">10</span><span class="s2">1 3 c 0.4</span>
<span class="linenos">11</span><span class="s2">1 3 d 0.2</span>
<span class="linenos">12</span><span class="s2">2 3 c 0.3</span>
<span class="linenos">13</span><span class="s2">2 3 d 0.2</span>
<span class="linenos">14</span><span class="s2">3 0</span>
<span class="linenos">15</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="n">sym1</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym1&quot;</span><span class="p">)</span>
<span class="linenos">18</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;eps&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">19</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">20</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos">21</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="linenos">22</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="linenos">23</span>
<span class="linenos">24</span><span class="n">a</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">isymbols</span><span class="o">=</span><span class="n">sym1</span><span class="p">)</span>
<span class="linenos">25</span><span class="n">a</span><span class="o">.</span><span class="n">input_symbols</span> <span class="o">=</span> <span class="n">sym1</span>
<span class="linenos">26</span>
<span class="linenos">27</span><span class="n">a_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">28</span><span class="n">a_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">a_dot</span><span class="p">)</span>
<span class="linenos">29</span><span class="n">a_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;vector-fst.svg&quot;</span><span class="p">)</span>
<span class="linenos">30</span>
<span class="linenos">31</span><span class="n">nbest_1</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos">32</span><span class="n">nbest_1_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">nbest_1</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">33</span><span class="n">nbest_1_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">nbest_1_dot</span><span class="p">)</span>
<span class="linenos">34</span><span class="n">nbest_1_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;vector-fst-1best.svg&quot;</span><span class="p">)</span>
<span class="linenos">35</span>
<span class="linenos">36</span><span class="n">nbest_2</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="linenos">37</span><span class="n">nbest_2_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">nbest_2</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">38</span><span class="n">nbest_2_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">nbest_2_dot</span><span class="p">)</span>
<span class="linenos">39</span><span class="n">nbest_2_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;vector-fst-2best.svg&quot;</span><span class="p">)</span>
<span class="linenos">40</span>
<span class="linenos">41</span><span class="n">nbest_3</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="linenos">42</span><span class="n">nbest_3_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">nbest_3</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">43</span><span class="n">nbest_3_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">nbest_3_dot</span><span class="p">)</span>
<span class="linenos">44</span><span class="n">nbest_3_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;vector-fst-3best.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id147" style="width: 600px">
<img alt="vector-fst.svg" src="../_images/vector-fst2.svg" /><figcaption>
<p><span class="caption-number">Fig. 79 </span><span class="caption-text">Visualization of vector-fst.svg</span><a class="headerlink" href="#id147" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id148" style="width: 600px">
<img alt="vector-fst-1best.svg" src="../_images/vector-fst-1best.svg" /><figcaption>
<p><span class="caption-number">Fig. 80 </span><span class="caption-text">Visualization of vector-fst-1best.svg</span><a class="headerlink" href="#id148" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id149" style="width: 600px">
<img alt="vector-fst-2best.svg" src="../_images/vector-fst-2best.svg" /><figcaption>
<p><span class="caption-number">Fig. 81 </span><span class="caption-text">Visualization of vector-fst-2best.svg</span><a class="headerlink" href="#id149" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id150" style="width: 600px">
<img alt="vector-fst-3best.svg" src="../_images/vector-fst-3best1.svg" /><figcaption>
<p><span class="caption-number">Fig. 82 </span><span class="caption-text">Visualization of vector-fst-3best.svg</span><a class="headerlink" href="#id150" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<ol class="arabic simple" start="2">
<li><p>shortest_path(fst: _kaldifst.LatticeFst, n: int = 1) -&gt; _kaldifst.Lattice</p></li>
</ol>
<p>This operation produces an FST containing the n-shortest paths in the input <code class="docutils literal notranslate"><span class="pre">Lattice</span></code>.</p>
<p>The n -shortest paths are the n -lowest weight paths w.r.t. the natural semiring
order. The single path that can be read from the ith of at most n transitions
leaving the initial state of the resulting FST is the ith shortest path.</p>
<p>See also <a class="reference external" href="https://www.openfst.org/twiki/bin/view/FST/ShortestPathDoc">https://www.openfst.org/twiki/bin/view/FST/ShortestPathDoc</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> – Size of n-best.</p></li>
<li><p><strong>unique</strong> – Return only distinct strings. (NB: must be acceptor; epsilons
treated as regular symbols)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Return a Lattice containing n linear paths.</p>
</dd>
</dl>
<p><strong>Example: shortest_path of a Lattice</strong></p>
<div class="literal-block-wrapper docutils container" id="id151">
<div class="code-block-caption"><span class="caption-number">Listing 48 </span><span class="caption-text">ShortestPath for a Lattice</span><a class="headerlink" href="#id151" title="Permalink to this code"></a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="ch">#!/usr/bin/env python3</span>
<span class="linenos">  2</span>
<span class="linenos">  3</span><span class="kn">import</span> <span class="nn">graphviz</span>
<span class="linenos">  4</span>
<span class="linenos">  5</span><span class="kn">import</span> <span class="nn">kaldifst</span>
<span class="linenos">  6</span>
<span class="linenos">  7</span><span class="n">fst</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">Lattice</span><span class="p">()</span>
<span class="linenos">  8</span><span class="n">s0</span> <span class="o">=</span> <span class="n">fst</span><span class="o">.</span><span class="n">add_state</span><span class="p">()</span>
<span class="linenos">  9</span><span class="n">s1</span> <span class="o">=</span> <span class="n">fst</span><span class="o">.</span><span class="n">add_state</span><span class="p">()</span>
<span class="linenos"> 10</span><span class="n">s2</span> <span class="o">=</span> <span class="n">fst</span><span class="o">.</span><span class="n">add_state</span><span class="p">()</span>
<span class="linenos"> 11</span><span class="n">s3</span> <span class="o">=</span> <span class="n">fst</span><span class="o">.</span><span class="n">add_state</span><span class="p">()</span>
<span class="linenos"> 12</span>
<span class="linenos"> 13</span><span class="n">fst</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">s0</span>
<span class="linenos"> 14</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos"> 15</span>    <span class="n">state</span><span class="o">=</span><span class="n">s0</span><span class="p">,</span>
<span class="linenos"> 16</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos"> 17</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="linenos"> 18</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="linenos"> 19</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.08</span><span class="p">),</span>
<span class="linenos"> 20</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span>
<span class="linenos"> 21</span>    <span class="p">),</span>
<span class="linenos"> 22</span><span class="p">)</span>
<span class="linenos"> 23</span>
<span class="linenos"> 24</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos"> 25</span>    <span class="n">state</span><span class="o">=</span><span class="n">s0</span><span class="p">,</span>
<span class="linenos"> 26</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos"> 27</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="linenos"> 28</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="linenos"> 29</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.03</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.07</span><span class="p">),</span>
<span class="linenos"> 30</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s2</span><span class="p">,</span>
<span class="linenos"> 31</span>    <span class="p">),</span>
<span class="linenos"> 32</span><span class="p">)</span>
<span class="linenos"> 33</span>
<span class="linenos"> 34</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos"> 35</span>    <span class="n">state</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span>
<span class="linenos"> 36</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos"> 37</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos"> 38</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos"> 39</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.3</span><span class="p">),</span>
<span class="linenos"> 40</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s3</span><span class="p">,</span>
<span class="linenos"> 41</span>    <span class="p">),</span>
<span class="linenos"> 42</span><span class="p">)</span>
<span class="linenos"> 43</span>
<span class="linenos"> 44</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos"> 45</span>    <span class="n">state</span><span class="o">=</span><span class="n">s1</span><span class="p">,</span>
<span class="linenos"> 46</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos"> 47</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="linenos"> 48</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="linenos"> 49</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.05</span><span class="p">),</span>
<span class="linenos"> 50</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s3</span><span class="p">,</span>
<span class="linenos"> 51</span>    <span class="p">),</span>
<span class="linenos"> 52</span><span class="p">)</span>
<span class="linenos"> 53</span>
<span class="linenos"> 54</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos"> 55</span>    <span class="n">state</span><span class="o">=</span><span class="n">s2</span><span class="p">,</span>
<span class="linenos"> 56</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos"> 57</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos"> 58</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="linenos"> 59</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.15</span><span class="p">),</span>
<span class="linenos"> 60</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s3</span><span class="p">,</span>
<span class="linenos"> 61</span>    <span class="p">),</span>
<span class="linenos"> 62</span><span class="p">)</span>
<span class="linenos"> 63</span>
<span class="linenos"> 64</span><span class="n">fst</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
<span class="linenos"> 65</span>    <span class="n">state</span><span class="o">=</span><span class="n">s2</span><span class="p">,</span>
<span class="linenos"> 66</span>    <span class="n">arc</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeArc</span><span class="p">(</span>
<span class="linenos"> 67</span>        <span class="n">ilabel</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="linenos"> 68</span>        <span class="n">olabel</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="linenos"> 69</span>        <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="p">(</span><span class="n">graph_cost</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">acoustic_cost</span><span class="o">=</span><span class="mf">0.15</span><span class="p">),</span>
<span class="linenos"> 70</span>        <span class="n">nextstate</span><span class="o">=</span><span class="n">s3</span><span class="p">,</span>
<span class="linenos"> 71</span>    <span class="p">),</span>
<span class="linenos"> 72</span><span class="p">)</span>
<span class="linenos"> 73</span>
<span class="linenos"> 74</span><span class="n">fst</span><span class="o">.</span><span class="n">set_final</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="n">s3</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="n">kaldifst</span><span class="o">.</span><span class="n">LatticeWeight</span><span class="o">.</span><span class="n">one</span><span class="p">)</span>
<span class="linenos"> 75</span>
<span class="linenos"> 76</span>
<span class="linenos"> 77</span><span class="n">sym1</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym1&quot;</span><span class="p">)</span>
<span class="linenos"> 78</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;eps&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos"> 79</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos"> 80</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos"> 81</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="linenos"> 82</span><span class="n">sym1</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="linenos"> 83</span>
<span class="linenos"> 84</span><span class="n">sym2</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">SymbolTable</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;sym2&quot;</span><span class="p">)</span>
<span class="linenos"> 85</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;eps&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos"> 86</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos"> 87</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos"> 88</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="linenos"> 89</span><span class="n">sym2</span><span class="o">.</span><span class="n">add_symbol</span><span class="p">(</span><span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="linenos"> 90</span>
<span class="linenos"> 91</span><span class="n">fst</span><span class="o">.</span><span class="n">input_symbols</span> <span class="o">=</span> <span class="n">sym1</span>
<span class="linenos"> 92</span><span class="n">fst</span><span class="o">.</span><span class="n">output_symbols</span> <span class="o">=</span> <span class="n">sym2</span>
<span class="linenos"> 93</span>
<span class="linenos"> 94</span><span class="n">fst_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos"> 95</span><span class="n">fst_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">fst_dot</span><span class="p">)</span>
<span class="linenos"> 96</span><span class="n">fst_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;lattice.svg&quot;</span><span class="p">)</span>
<span class="linenos"> 97</span>
<span class="linenos"> 98</span><span class="n">nbest_1</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos"> 99</span><span class="n">nbest_1_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">nbest_1</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">100</span><span class="n">nbest_1_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">nbest_1_dot</span><span class="p">)</span>
<span class="linenos">101</span><span class="n">nbest_1_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;lattice-1best.svg&quot;</span><span class="p">)</span>
<span class="linenos">102</span>
<span class="linenos">103</span><span class="n">nbest_2</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="linenos">104</span><span class="n">nbest_2_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">nbest_2</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">105</span><span class="n">nbest_2_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">nbest_2_dot</span><span class="p">)</span>
<span class="linenos">106</span><span class="n">nbest_2_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;lattice-2best.svg&quot;</span><span class="p">)</span>
<span class="linenos">107</span>
<span class="linenos">108</span><span class="n">nbest_3</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">shortest_path</span><span class="p">(</span><span class="n">fst</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="linenos">109</span><span class="n">nbest_3_dot</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">nbest_3</span><span class="p">,</span> <span class="n">acceptor</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">portrait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">110</span><span class="n">nbest_3_source</span> <span class="o">=</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">nbest_3_dot</span><span class="p">)</span>
<span class="linenos">111</span><span class="n">nbest_3_source</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">outfile</span><span class="o">=</span><span class="s2">&quot;lattice-3best.svg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id152" style="width: 600px">
<img alt="lattice.svg" src="../_images/lattice3.svg" /><figcaption>
<p><span class="caption-number">Fig. 83 </span><span class="caption-text">Visualization of lattice.svg</span><a class="headerlink" href="#id152" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id153" style="width: 600px">
<img alt="lattice-1best.svg" src="../_images/lattice-1best.svg" /><figcaption>
<p><span class="caption-number">Fig. 84 </span><span class="caption-text">Visualization of lattice-1best.svg</span><a class="headerlink" href="#id153" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id154" style="width: 600px">
<img alt="lattice-2best.svg" src="../_images/lattice-2best.svg" /><figcaption>
<p><span class="caption-number">Fig. 85 </span><span class="caption-text">Visualization of lattice-2best.svg</span><a class="headerlink" href="#id154" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id155" style="width: 600px">
<img alt="lattice-3best.svg" src="../_images/lattice-3best1.svg" /><figcaption>
<p><span class="caption-number">Fig. 86 </span><span class="caption-text">Visualization of lattice-3best.svg</span><a class="headerlink" href="#id155" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</dd></dl>

</section>
<section id="times">
<h2>times<a class="headerlink" href="#times" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="kaldifst.times">
<span class="sig-prename descclassname"><span class="pre">kaldifst.</span></span><span class="sig-name descname"><span class="pre">times</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kaldifst.times" title="Permalink to this definition"></a></dt>
<dd><p>Overloaded function.</p>
<ol class="arabic simple">
<li><p>times(arg0: _kaldifst.TropicalWeight, arg1: _kaldifst.TropicalWeight) -&gt; _kaldifst.TropicalWeight</p></li>
<li><p>times(arg0: _kaldifst.LatticeWeight, arg1: _kaldifst.LatticeWeight) -&gt; _kaldifst.LatticeWeight</p></li>
</ol>
</dd></dl>

</section>
<section id="arciterator">
<h2>ArcIterator<a class="headerlink" href="#arciterator" title="Permalink to this headline"></a></h2>
<section id="done">
<h3>done<a class="headerlink" href="#done" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.ArcIterator.done">
<span class="sig-prename descclassname"><span class="pre">ArcIterator.</span></span><span class="sig-name descname"><span class="pre">done</span></span><a class="headerlink" href="#kaldifst.ArcIterator.done" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="flags">
<h3>flags<a class="headerlink" href="#flags" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.ArcIterator.flags">
<span class="sig-prename descclassname"><span class="pre">ArcIterator.</span></span><span class="sig-name descname"><span class="pre">flags</span></span><a class="headerlink" href="#kaldifst.ArcIterator.flags" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="position">
<h3>position<a class="headerlink" href="#position" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.ArcIterator.position">
<span class="sig-prename descclassname"><span class="pre">ArcIterator.</span></span><span class="sig-name descname"><span class="pre">position</span></span><a class="headerlink" href="#kaldifst.ArcIterator.position" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="value">
<h3>value<a class="headerlink" href="#value" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.ArcIterator.value">
<span class="sig-prename descclassname"><span class="pre">ArcIterator.</span></span><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#kaldifst.ArcIterator.value" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
</section>
<section id="floatweight">
<h2>FloatWeight<a class="headerlink" href="#floatweight" title="Permalink to this headline"></a></h2>
<section id="id3">
<h3>value<a class="headerlink" href="#id3" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.FloatWeight.value">
<span class="sig-prename descclassname"><span class="pre">FloatWeight.</span></span><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#kaldifst.FloatWeight.value" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
</section>
<section id="lattice">
<span id="lattice-class"></span><h2>Lattice<a class="headerlink" href="#lattice" title="Permalink to this headline"></a></h2>
<p>Please refer to <a class="reference internal" href="../lattice/intro.html#introduction-to-lattice"><span class="std std-ref">Introduction to Lattice</span></a> for usage.</p>
<section id="copy">
<h3>copy<a class="headerlink" href="#copy" title="Permalink to this headline"></a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="kaldifst.Lattice.copy">
<span class="sig-prename descclassname"><span class="pre">Lattice.</span></span><span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_kaldifst.LatticeFst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">safe</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_kaldifst.LatticeFst</span></span></span><a class="headerlink" href="#kaldifst.Lattice.copy" title="Permalink to this definition"></a></dt>
<dd><ol class="arabic simple">
<li><p>The copying is constant time if safe = false or if safe = true and is on an otherwise unaccessed FST.</p></li>
</ol>
<p>(2) If safe = true, the copy is thread-safe in that the original
and copy can be safely accessed (but not necessarily mutated) by
separate threads. For some FST types, ‘Copy(true)’ should only
be called on an FST that has not otherwise been accessed.
Behavior is otherwise undefined.</p>
<p>(3) If a MutableFst is copied and then mutated, then the original
is unmodified and vice versa (often by a copy-on-write on the
initial mutation, which may not be constant time).</p>
<blockquote>
<div><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>To get a deep copy of an FST, e.g., a deep copy of Lattice <code class="docutils literal notranslate"><span class="pre">lat1</span></code>, please use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lat2</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">Lattice</span><span class="p">(</span><span class="n">lat1</span><span class="p">)</span>
</pre></div>
</div>
<p>To get deep copy of StdVectorFst <code class="docutils literal notranslate"><span class="pre">fst1</span></code>, please use</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fst2</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">StdVectorFst</span><span class="p">(</span><span class="n">fst1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div></blockquote>
</dd></dl>

</section>
<section id="input-symbols">
<h3>input_symbols<a class="headerlink" href="#input-symbols" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.Lattice.input_symbols">
<span class="sig-prename descclassname"><span class="pre">Lattice.</span></span><span class="sig-name descname"><span class="pre">input_symbols</span></span><a class="headerlink" href="#kaldifst.Lattice.input_symbols" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="is-ilabel-sorted">
<h3>is_ilabel_sorted<a class="headerlink" href="#is-ilabel-sorted" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.Lattice.is_ilabel_sorted">
<span class="sig-prename descclassname"><span class="pre">Lattice.</span></span><span class="sig-name descname"><span class="pre">is_ilabel_sorted</span></span><a class="headerlink" href="#kaldifst.Lattice.is_ilabel_sorted" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="is-olabel-sorted">
<h3>is_olabel_sorted<a class="headerlink" href="#is-olabel-sorted" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.Lattice.is_olabel_sorted">
<span class="sig-prename descclassname"><span class="pre">Lattice.</span></span><span class="sig-name descname"><span class="pre">is_olabel_sorted</span></span><a class="headerlink" href="#kaldifst.Lattice.is_olabel_sorted" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="num-states">
<h3>num_states<a class="headerlink" href="#num-states" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.Lattice.num_states">
<span class="sig-prename descclassname"><span class="pre">Lattice.</span></span><span class="sig-name descname"><span class="pre">num_states</span></span><a class="headerlink" href="#kaldifst.Lattice.num_states" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="output-symbols">
<h3>output_symbols<a class="headerlink" href="#output-symbols" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.Lattice.output_symbols">
<span class="sig-prename descclassname"><span class="pre">Lattice.</span></span><span class="sig-name descname"><span class="pre">output_symbols</span></span><a class="headerlink" href="#kaldifst.Lattice.output_symbols" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="start">
<h3>start<a class="headerlink" href="#start" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.Lattice.start">
<span class="sig-prename descclassname"><span class="pre">Lattice.</span></span><span class="sig-name descname"><span class="pre">start</span></span><a class="headerlink" href="#kaldifst.Lattice.start" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="type">
<h3>type<a class="headerlink" href="#type" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.Lattice.type">
<span class="sig-prename descclassname"><span class="pre">Lattice.</span></span><span class="sig-name descname"><span class="pre">type</span></span><a class="headerlink" href="#kaldifst.Lattice.type" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
</section>
<section id="latticearc">
<span id="lattice-arc-class"></span><h2>LatticeArc<a class="headerlink" href="#latticearc" title="Permalink to this headline"></a></h2>
<section id="init">
<h3>__init__<a class="headerlink" href="#init" title="Permalink to this headline"></a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="kaldifst.LatticeArc.__init__">
<span class="sig-prename descclassname"><span class="pre">LatticeArc.</span></span><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kaldifst.LatticeArc.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Overloaded function.</p>
<ol class="arabic simple">
<li><p>__init__(self: _kaldifst.LatticeArc) -&gt; None</p></li>
<li><p>__init__(self: _kaldifst.LatticeArc, ilabel: int, olabel: int, weight: _kaldifst.LatticeWeight, nextstate: int) -&gt; None</p></li>
<li><p>__init__(self: _kaldifst.LatticeArc, ilabel: int, olabel: int, weight: float, nextstate: int) -&gt; None</p></li>
</ol>
</dd></dl>

</section>
<section id="ilabel">
<h3>ilabel<a class="headerlink" href="#ilabel" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.LatticeArc.ilabel">
<span class="sig-prename descclassname"><span class="pre">LatticeArc.</span></span><span class="sig-name descname"><span class="pre">ilabel</span></span><a class="headerlink" href="#kaldifst.LatticeArc.ilabel" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="nextstate">
<h3>nextstate<a class="headerlink" href="#nextstate" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.LatticeArc.nextstate">
<span class="sig-prename descclassname"><span class="pre">LatticeArc.</span></span><span class="sig-name descname"><span class="pre">nextstate</span></span><a class="headerlink" href="#kaldifst.LatticeArc.nextstate" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="olabel">
<h3>olabel<a class="headerlink" href="#olabel" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.LatticeArc.olabel">
<span class="sig-prename descclassname"><span class="pre">LatticeArc.</span></span><span class="sig-name descname"><span class="pre">olabel</span></span><a class="headerlink" href="#kaldifst.LatticeArc.olabel" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="weight">
<h3>weight<a class="headerlink" href="#weight" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.LatticeArc.weight">
<span class="sig-prename descclassname"><span class="pre">LatticeArc.</span></span><span class="sig-name descname"><span class="pre">weight</span></span><a class="headerlink" href="#kaldifst.LatticeArc.weight" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
</section>
<section id="latticeweight">
<span id="lattice-weight-class"></span><h2>LatticeWeight<a class="headerlink" href="#latticeweight" title="Permalink to this headline"></a></h2>
<section id="value1">
<h3>value1<a class="headerlink" href="#value1" title="Permalink to this headline"></a></h3>
<p>The graph cost.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.LatticeWeight.value1">
<span class="sig-prename descclassname"><span class="pre">LatticeWeight.</span></span><span class="sig-name descname"><span class="pre">value1</span></span><a class="headerlink" href="#kaldifst.LatticeWeight.value1" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="value2">
<h3>value2<a class="headerlink" href="#value2" title="Permalink to this headline"></a></h3>
<p>The acoustic cost.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.LatticeWeight.value2">
<span class="sig-prename descclassname"><span class="pre">LatticeWeight.</span></span><span class="sig-name descname"><span class="pre">value2</span></span><a class="headerlink" href="#kaldifst.LatticeWeight.value2" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
</section>
<section id="randomaccessvectorfstreader">
<h2>RandomAccessVectorFstReader<a class="headerlink" href="#randomaccessvectorfstreader" title="Permalink to this headline"></a></h2>
<section id="is-open">
<h3>is_open<a class="headerlink" href="#is-open" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.RandomAccessVectorFstReader.is_open">
<span class="sig-prename descclassname"><span class="pre">RandomAccessVectorFstReader.</span></span><span class="sig-name descname"><span class="pre">is_open</span></span><a class="headerlink" href="#kaldifst.RandomAccessVectorFstReader.is_open" title="Permalink to this definition"></a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if it is opened; return <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="sequentialvectorfstreader">
<h2>SequentialVectorFstReader<a class="headerlink" href="#sequentialvectorfstreader" title="Permalink to this headline"></a></h2>
<section id="id4">
<h3>done<a class="headerlink" href="#id4" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.SequentialVectorFstReader.done">
<span class="sig-prename descclassname"><span class="pre">SequentialVectorFstReader.</span></span><span class="sig-name descname"><span class="pre">done</span></span><a class="headerlink" href="#kaldifst.SequentialVectorFstReader.done" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="id5">
<h3>is_open<a class="headerlink" href="#id5" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.SequentialVectorFstReader.is_open">
<span class="sig-prename descclassname"><span class="pre">SequentialVectorFstReader.</span></span><span class="sig-name descname"><span class="pre">is_open</span></span><a class="headerlink" href="#kaldifst.SequentialVectorFstReader.is_open" title="Permalink to this definition"></a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if it is opened; return <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="key">
<h3>key<a class="headerlink" href="#key" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.SequentialVectorFstReader.key">
<span class="sig-prename descclassname"><span class="pre">SequentialVectorFstReader.</span></span><span class="sig-name descname"><span class="pre">key</span></span><a class="headerlink" href="#kaldifst.SequentialVectorFstReader.key" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="id6">
<h3>value<a class="headerlink" href="#id6" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.SequentialVectorFstReader.value">
<span class="sig-prename descclassname"><span class="pre">SequentialVectorFstReader.</span></span><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#kaldifst.SequentialVectorFstReader.value" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="stateiterator">
<h2>StateIterator<a class="headerlink" href="#stateiterator" title="Permalink to this headline"></a></h2>
<section id="id7">
<h3>done<a class="headerlink" href="#id7" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StateIterator.done">
<span class="sig-prename descclassname"><span class="pre">StateIterator.</span></span><span class="sig-name descname"><span class="pre">done</span></span><a class="headerlink" href="#kaldifst.StateIterator.done" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="id8">
<h3>value<a class="headerlink" href="#id8" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StateIterator.value">
<span class="sig-prename descclassname"><span class="pre">StateIterator.</span></span><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#kaldifst.StateIterator.value" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
</section>
<section id="stdarc">
<h2>StdArc<a class="headerlink" href="#stdarc" title="Permalink to this headline"></a></h2>
<section id="id9">
<h3>__init__<a class="headerlink" href="#id9" title="Permalink to this headline"></a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="kaldifst.StdArc.__init__">
<span class="sig-prename descclassname"><span class="pre">StdArc.</span></span><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kaldifst.StdArc.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Overloaded function.</p>
<ol class="arabic simple">
<li><p>__init__(self: _kaldifst.StdArc) -&gt; None</p></li>
<li><p>__init__(self: _kaldifst.StdArc, ilabel: int, olabel: int, weight: _kaldifst.TropicalWeight, nextstate: int) -&gt; None</p></li>
<li><p>__init__(self: _kaldifst.StdArc, ilabel: int, olabel: int, weight: float, nextstate: int) -&gt; None</p></li>
</ol>
</dd></dl>

</section>
<section id="id10">
<h3>ilabel<a class="headerlink" href="#id10" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StdArc.ilabel">
<span class="sig-prename descclassname"><span class="pre">StdArc.</span></span><span class="sig-name descname"><span class="pre">ilabel</span></span><a class="headerlink" href="#kaldifst.StdArc.ilabel" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="id11">
<h3>nextstate<a class="headerlink" href="#id11" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StdArc.nextstate">
<span class="sig-prename descclassname"><span class="pre">StdArc.</span></span><span class="sig-name descname"><span class="pre">nextstate</span></span><a class="headerlink" href="#kaldifst.StdArc.nextstate" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="id12">
<h3>olabel<a class="headerlink" href="#id12" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StdArc.olabel">
<span class="sig-prename descclassname"><span class="pre">StdArc.</span></span><span class="sig-name descname"><span class="pre">olabel</span></span><a class="headerlink" href="#kaldifst.StdArc.olabel" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="id13">
<h3>weight<a class="headerlink" href="#id13" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StdArc.weight">
<span class="sig-prename descclassname"><span class="pre">StdArc.</span></span><span class="sig-name descname"><span class="pre">weight</span></span><a class="headerlink" href="#kaldifst.StdArc.weight" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
</section>
<section id="stdconstfst">
<h2>StdConstFst<a class="headerlink" href="#stdconstfst" title="Permalink to this headline"></a></h2>
<section id="id14">
<h3>copy<a class="headerlink" href="#id14" title="Permalink to this headline"></a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="kaldifst.StdConstFst.copy">
<span class="sig-prename descclassname"><span class="pre">StdConstFst.</span></span><span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_kaldifst.StdFst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">safe</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_kaldifst.StdFst</span></span></span><a class="headerlink" href="#kaldifst.StdConstFst.copy" title="Permalink to this definition"></a></dt>
<dd><ol class="arabic simple">
<li><p>The copying is constant time if safe = false or if safe = true and is on an otherwise unaccessed FST.</p></li>
</ol>
<p>(2) If safe = true, the copy is thread-safe in that the original
and copy can be safely accessed (but not necessarily mutated) by
separate threads. For some FST types, ‘Copy(true)’ should only
be called on an FST that has not otherwise been accessed.
Behavior is otherwise undefined.</p>
<p>(3) If a MutableFst is copied and then mutated, then the original
is unmodified and vice versa (often by a copy-on-write on the
initial mutation, which may not be constant time).</p>
<blockquote>
<div><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>To get a deep copy of an FST, e.g., a deep copy of Lattice <code class="docutils literal notranslate"><span class="pre">lat1</span></code>, please use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lat2</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">Lattice</span><span class="p">(</span><span class="n">lat1</span><span class="p">)</span>
</pre></div>
</div>
<p>To get deep copy of StdVectorFst <code class="docutils literal notranslate"><span class="pre">fst1</span></code>, please use</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fst2</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">StdVectorFst</span><span class="p">(</span><span class="n">fst1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div></blockquote>
</dd></dl>

</section>
<section id="id15">
<h3>input_symbols<a class="headerlink" href="#id15" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StdConstFst.input_symbols">
<span class="sig-prename descclassname"><span class="pre">StdConstFst.</span></span><span class="sig-name descname"><span class="pre">input_symbols</span></span><a class="headerlink" href="#kaldifst.StdConstFst.input_symbols" title="Permalink to this definition"></a></dt>
<dd><p>Returns input label symbol table; return nullptr if not specified.</p>
</dd></dl>

</section>
<section id="id16">
<h3>is_ilabel_sorted<a class="headerlink" href="#id16" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StdConstFst.is_ilabel_sorted">
<span class="sig-prename descclassname"><span class="pre">StdConstFst.</span></span><span class="sig-name descname"><span class="pre">is_ilabel_sorted</span></span><a class="headerlink" href="#kaldifst.StdConstFst.is_ilabel_sorted" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="id17">
<h3>is_olabel_sorted<a class="headerlink" href="#id17" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StdConstFst.is_olabel_sorted">
<span class="sig-prename descclassname"><span class="pre">StdConstFst.</span></span><span class="sig-name descname"><span class="pre">is_olabel_sorted</span></span><a class="headerlink" href="#kaldifst.StdConstFst.is_olabel_sorted" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="id18">
<h3>num_states<a class="headerlink" href="#id18" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StdConstFst.num_states">
<span class="sig-prename descclassname"><span class="pre">StdConstFst.</span></span><span class="sig-name descname"><span class="pre">num_states</span></span><a class="headerlink" href="#kaldifst.StdConstFst.num_states" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="id19">
<h3>output_symbols<a class="headerlink" href="#id19" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StdConstFst.output_symbols">
<span class="sig-prename descclassname"><span class="pre">StdConstFst.</span></span><span class="sig-name descname"><span class="pre">output_symbols</span></span><a class="headerlink" href="#kaldifst.StdConstFst.output_symbols" title="Permalink to this definition"></a></dt>
<dd><p>Returns output label symbol table; return nullptr if not specified.</p>
</dd></dl>

</section>
<section id="id20">
<h3>start<a class="headerlink" href="#id20" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StdConstFst.start">
<span class="sig-prename descclassname"><span class="pre">StdConstFst.</span></span><span class="sig-name descname"><span class="pre">start</span></span><a class="headerlink" href="#kaldifst.StdConstFst.start" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="id21">
<h3>type<a class="headerlink" href="#id21" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StdConstFst.type">
<span class="sig-prename descclassname"><span class="pre">StdConstFst.</span></span><span class="sig-name descname"><span class="pre">type</span></span><a class="headerlink" href="#kaldifst.StdConstFst.type" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
</section>
<section id="stdfst">
<h2>StdFst<a class="headerlink" href="#stdfst" title="Permalink to this headline"></a></h2>
<section id="id22">
<h3>copy<a class="headerlink" href="#id22" title="Permalink to this headline"></a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="kaldifst.StdFst.copy">
<span class="sig-prename descclassname"><span class="pre">StdFst.</span></span><span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_kaldifst.StdFst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">safe</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_kaldifst.StdFst</span></span></span><a class="headerlink" href="#kaldifst.StdFst.copy" title="Permalink to this definition"></a></dt>
<dd><ol class="arabic simple">
<li><p>The copying is constant time if safe = false or if safe = true and is on an otherwise unaccessed FST.</p></li>
</ol>
<p>(2) If safe = true, the copy is thread-safe in that the original
and copy can be safely accessed (but not necessarily mutated) by
separate threads. For some FST types, ‘Copy(true)’ should only
be called on an FST that has not otherwise been accessed.
Behavior is otherwise undefined.</p>
<p>(3) If a MutableFst is copied and then mutated, then the original
is unmodified and vice versa (often by a copy-on-write on the
initial mutation, which may not be constant time).</p>
<blockquote>
<div><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>To get a deep copy of an FST, e.g., a deep copy of Lattice <code class="docutils literal notranslate"><span class="pre">lat1</span></code>, please use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lat2</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">Lattice</span><span class="p">(</span><span class="n">lat1</span><span class="p">)</span>
</pre></div>
</div>
<p>To get deep copy of StdVectorFst <code class="docutils literal notranslate"><span class="pre">fst1</span></code>, please use</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fst2</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">StdVectorFst</span><span class="p">(</span><span class="n">fst1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div></blockquote>
</dd></dl>

</section>
<section id="id23">
<h3>input_symbols<a class="headerlink" href="#id23" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StdFst.input_symbols">
<span class="sig-prename descclassname"><span class="pre">StdFst.</span></span><span class="sig-name descname"><span class="pre">input_symbols</span></span><a class="headerlink" href="#kaldifst.StdFst.input_symbols" title="Permalink to this definition"></a></dt>
<dd><p>Returns input label symbol table; return nullptr if not specified.</p>
</dd></dl>

</section>
<section id="id24">
<h3>is_ilabel_sorted<a class="headerlink" href="#id24" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StdFst.is_ilabel_sorted">
<span class="sig-prename descclassname"><span class="pre">StdFst.</span></span><span class="sig-name descname"><span class="pre">is_ilabel_sorted</span></span><a class="headerlink" href="#kaldifst.StdFst.is_ilabel_sorted" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="id25">
<h3>is_olabel_sorted<a class="headerlink" href="#id25" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StdFst.is_olabel_sorted">
<span class="sig-prename descclassname"><span class="pre">StdFst.</span></span><span class="sig-name descname"><span class="pre">is_olabel_sorted</span></span><a class="headerlink" href="#kaldifst.StdFst.is_olabel_sorted" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="id26">
<h3>output_symbols<a class="headerlink" href="#id26" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StdFst.output_symbols">
<span class="sig-prename descclassname"><span class="pre">StdFst.</span></span><span class="sig-name descname"><span class="pre">output_symbols</span></span><a class="headerlink" href="#kaldifst.StdFst.output_symbols" title="Permalink to this definition"></a></dt>
<dd><p>Returns output label symbol table; return nullptr if not specified.</p>
</dd></dl>

</section>
<section id="id27">
<h3>start<a class="headerlink" href="#id27" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StdFst.start">
<span class="sig-prename descclassname"><span class="pre">StdFst.</span></span><span class="sig-name descname"><span class="pre">start</span></span><a class="headerlink" href="#kaldifst.StdFst.start" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="id28">
<h3>type<a class="headerlink" href="#id28" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StdFst.type">
<span class="sig-prename descclassname"><span class="pre">StdFst.</span></span><span class="sig-name descname"><span class="pre">type</span></span><a class="headerlink" href="#kaldifst.StdFst.type" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
</section>
<section id="stdvectorfst">
<h2>StdVectorFst<a class="headerlink" href="#stdvectorfst" title="Permalink to this headline"></a></h2>
<section id="id29">
<h3>copy<a class="headerlink" href="#id29" title="Permalink to this headline"></a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="kaldifst.StdVectorFst.copy">
<span class="sig-prename descclassname"><span class="pre">StdVectorFst.</span></span><span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_kaldifst.StdFst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">safe</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">_kaldifst.StdFst</span></span></span><a class="headerlink" href="#kaldifst.StdVectorFst.copy" title="Permalink to this definition"></a></dt>
<dd><ol class="arabic simple">
<li><p>The copying is constant time if safe = false or if safe = true and is on an otherwise unaccessed FST.</p></li>
</ol>
<p>(2) If safe = true, the copy is thread-safe in that the original
and copy can be safely accessed (but not necessarily mutated) by
separate threads. For some FST types, ‘Copy(true)’ should only
be called on an FST that has not otherwise been accessed.
Behavior is otherwise undefined.</p>
<p>(3) If a MutableFst is copied and then mutated, then the original
is unmodified and vice versa (often by a copy-on-write on the
initial mutation, which may not be constant time).</p>
<blockquote>
<div><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>To get a deep copy of an FST, e.g., a deep copy of Lattice <code class="docutils literal notranslate"><span class="pre">lat1</span></code>, please use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lat2</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">Lattice</span><span class="p">(</span><span class="n">lat1</span><span class="p">)</span>
</pre></div>
</div>
<p>To get deep copy of StdVectorFst <code class="docutils literal notranslate"><span class="pre">fst1</span></code>, please use</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fst2</span> <span class="o">=</span> <span class="n">kaldifst</span><span class="o">.</span><span class="n">StdVectorFst</span><span class="p">(</span><span class="n">fst1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div></blockquote>
</dd></dl>

</section>
<section id="id30">
<h3>input_symbols<a class="headerlink" href="#id30" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StdVectorFst.input_symbols">
<span class="sig-prename descclassname"><span class="pre">StdVectorFst.</span></span><span class="sig-name descname"><span class="pre">input_symbols</span></span><a class="headerlink" href="#kaldifst.StdVectorFst.input_symbols" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="id31">
<h3>is_ilabel_sorted<a class="headerlink" href="#id31" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StdVectorFst.is_ilabel_sorted">
<span class="sig-prename descclassname"><span class="pre">StdVectorFst.</span></span><span class="sig-name descname"><span class="pre">is_ilabel_sorted</span></span><a class="headerlink" href="#kaldifst.StdVectorFst.is_ilabel_sorted" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="id32">
<h3>is_olabel_sorted<a class="headerlink" href="#id32" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StdVectorFst.is_olabel_sorted">
<span class="sig-prename descclassname"><span class="pre">StdVectorFst.</span></span><span class="sig-name descname"><span class="pre">is_olabel_sorted</span></span><a class="headerlink" href="#kaldifst.StdVectorFst.is_olabel_sorted" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="id33">
<h3>num_states<a class="headerlink" href="#id33" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StdVectorFst.num_states">
<span class="sig-prename descclassname"><span class="pre">StdVectorFst.</span></span><span class="sig-name descname"><span class="pre">num_states</span></span><a class="headerlink" href="#kaldifst.StdVectorFst.num_states" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="id34">
<h3>output_symbols<a class="headerlink" href="#id34" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StdVectorFst.output_symbols">
<span class="sig-prename descclassname"><span class="pre">StdVectorFst.</span></span><span class="sig-name descname"><span class="pre">output_symbols</span></span><a class="headerlink" href="#kaldifst.StdVectorFst.output_symbols" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="id35">
<h3>start<a class="headerlink" href="#id35" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StdVectorFst.start">
<span class="sig-prename descclassname"><span class="pre">StdVectorFst.</span></span><span class="sig-name descname"><span class="pre">start</span></span><a class="headerlink" href="#kaldifst.StdVectorFst.start" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="id36">
<h3>type<a class="headerlink" href="#id36" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.StdVectorFst.type">
<span class="sig-prename descclassname"><span class="pre">StdVectorFst.</span></span><span class="sig-name descname"><span class="pre">type</span></span><a class="headerlink" href="#kaldifst.StdVectorFst.type" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
</section>
<section id="symboltable">
<h2>SymbolTable<a class="headerlink" href="#symboltable" title="Permalink to this headline"></a></h2>
<section id="add-symbol">
<h3>add_symbol<a class="headerlink" href="#add-symbol" title="Permalink to this headline"></a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="kaldifst.SymbolTable.add_symbol">
<span class="sig-prename descclassname"><span class="pre">SymbolTable.</span></span><span class="sig-name descname"><span class="pre">add_symbol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kaldifst.SymbolTable.add_symbol" title="Permalink to this definition"></a></dt>
<dd><p>Overloaded function.</p>
<ol class="arabic simple">
<li><p>add_symbol(self: _kaldifst.SymbolTable, symbol: str, key: int) -&gt; int</p></li>
</ol>
<p>Adds a symbol with given key to table. A symbol table also keeps track of the last available key (highest key value in the symbol table).</p>
<ol class="arabic simple" start="2">
<li><p>add_symbol(self: _kaldifst.SymbolTable, symbol: str) -&gt; int</p></li>
</ol>
<p>Adds a symbol to the table. The associated value key is automatically assigned by the symbol table.</p>
</dd></dl>

</section>
<section id="find">
<h3>find<a class="headerlink" href="#find" title="Permalink to this headline"></a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="kaldifst.SymbolTable.find">
<span class="sig-prename descclassname"><span class="pre">SymbolTable.</span></span><span class="sig-name descname"><span class="pre">find</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kaldifst.SymbolTable.find" title="Permalink to this definition"></a></dt>
<dd><p>Overloaded function.</p>
<ol class="arabic simple">
<li><p>find(self: _kaldifst.SymbolTable, key: int) -&gt; str</p></li>
</ol>
<p>Returns the string associated with the key; if the key is out ofrange (&lt;0, &gt;max), returns an empty string.</p>
<ol class="arabic simple" start="2">
<li><p>find(self: _kaldifst.SymbolTable, symbol: str) -&gt; int</p></li>
</ol>
<p>Returns the key associated with the symbol; if the symbol does not exist, kNoSymbol is returned.</p>
<ol class="arabic simple" start="3">
<li><p>find(self: _kaldifst.SymbolTable, symbol: str) -&gt; int</p></li>
</ol>
<p>Returns the key associated with the symbol; if the symbol does not exist, kNoSymbol is returned.</p>
</dd></dl>

</section>
<section id="check-sum">
<h3>check_sum<a class="headerlink" href="#check-sum" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.SymbolTable.check_sum">
<span class="sig-prename descclassname"><span class="pre">SymbolTable.</span></span><span class="sig-name descname"><span class="pre">check_sum</span></span><a class="headerlink" href="#kaldifst.SymbolTable.check_sum" title="Permalink to this definition"></a></dt>
<dd><p>Return the label-agnostic MD5 check-sum for this table. All new symbols added to the table will result in an updated checksum. Deprecated.</p>
</dd></dl>

</section>
<section id="labeled-check-sum">
<h3>labeled_check_sum<a class="headerlink" href="#labeled-check-sum" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.SymbolTable.labeled_check_sum">
<span class="sig-prename descclassname"><span class="pre">SymbolTable.</span></span><span class="sig-name descname"><span class="pre">labeled_check_sum</span></span><a class="headerlink" href="#kaldifst.SymbolTable.labeled_check_sum" title="Permalink to this definition"></a></dt>
<dd><p>Same as <cite>check_sum</cite>, but returns an label-dependent version.</p>
</dd></dl>

</section>
<section id="name">
<h3>name<a class="headerlink" href="#name" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.SymbolTable.name">
<span class="sig-prename descclassname"><span class="pre">SymbolTable.</span></span><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#kaldifst.SymbolTable.name" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
</section>
<section id="textnormalizer">
<h2>TextNormalizer<a class="headerlink" href="#textnormalizer" title="Permalink to this headline"></a></h2>
</section>
<section id="tropicalweight">
<h2>TropicalWeight<a class="headerlink" href="#tropicalweight" title="Permalink to this headline"></a></h2>
<section id="id37">
<h3>value<a class="headerlink" href="#id37" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.TropicalWeight.value">
<span class="sig-prename descclassname"><span class="pre">TropicalWeight.</span></span><span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#kaldifst.TropicalWeight.value" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
</section>
<section id="vectorfstwriter">
<h2>VectorFstWriter<a class="headerlink" href="#vectorfstwriter" title="Permalink to this headline"></a></h2>
<section id="write">
<h3>write<a class="headerlink" href="#write" title="Permalink to this headline"></a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="kaldifst.VectorFstWriter.write">
<span class="sig-prename descclassname"><span class="pre">VectorFstWriter.</span></span><span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#kaldifst.VectorFstWriter.write" title="Permalink to this definition"></a></dt>
<dd><p>Write an item.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The key for the item.</p></li>
<li><p><strong>value</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code>) – The value for the item. Its type depends on the actual writer class.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="id38">
<h3>is_open<a class="headerlink" href="#id38" title="Permalink to this headline"></a></h3>
<dl class="py attribute">
<dt class="sig sig-object py" id="kaldifst.VectorFstWriter.is_open">
<span class="sig-prename descclassname"><span class="pre">VectorFstWriter.</span></span><span class="sig-name descname"><span class="pre">is_open</span></span><a class="headerlink" href="#kaldifst.VectorFstWriter.is_open" title="Permalink to this definition"></a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if it is opened; return <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Python API reference" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../referencens/index.html" class="btn btn-neutral float-right" title="References" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Next-gen Kaldi development team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>